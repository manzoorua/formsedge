import{c as e,r as s,s as t,j as i,g as a,B as n,C as r,p as o,b as l,d,e as c,Y as m,f as h,A as u,q as x,Z as p,u as b,k as g,N as f,L as j,$ as v}from"./main-BQOa5mM0.js";import{T as N,a as y,b as w,c as k}from"./tabs-BbGbqsLR.js";import{I as C}from"./input-COMLYb-C.js";import{L as S}from"./label-B7su6Jaa.js";import{S as $,a as T,b as z,c as F,d as E}from"./select-DDetsmr9.js";import{B as L}from"./badge-6grXs2Vt.js";import{T as P}from"./textarea-Dbo2TYJP.js";import{S as B}from"./switch-CocPZzzC.js";import{F as I,S as R}from"./FieldRenderer-CugH2gNC.js";import{D,f as O,a as _,b as A,c as M,e as V}from"./dialog-Zbmvpzx0.js";import{u as H,L as U}from"./useConditionalLogic-Domhckc1.js";import{C as q}from"./circle-check-big-BImW7D2D.js";import{C as W}from"./checkbox-CljSm3_p.js";import{S as G,M as Y}from"./sun-oLtT9Ef9.js";import{M as Z}from"./monitor-BXsJ4oWe.js";import{M as K}from"./message-circle-DRCIKz-o.js";import{S as J}from"./sparkles-CpkCaYAf.js";import{S as Q}from"./star-Dd_cckZo.js";import{H as X}from"./heart-CfatTQfs.js";import{Z as ee}from"./zap-Ewtv7hwb.js";import{G as se}from"./gift-mKnn5hCx.js";import{M as te}from"./mail-BKZIg2ud.js";import{P as ie}from"./phone-DTqSRSbI.js";import{S as ae}from"./send-7VC4MSh_.js";import{C as ne}from"./circle-check-Ccyr716G.js";import{C as re}from"./copy-BZksGIXa.js";import{E as oe}from"./external-link-IfMGOG27.js";import{S as le}from"./scroll-area-C89FDXlH.js";import{L as de,E as ce,T as me}from"./tablet-TgMF4u50.js";import{E as he}from"./eye-Bq8mO4No.js";import{C as ue}from"./circle-alert-C_kZuZo4.js";import{A as xe}from"./arrow-left-BoD24ioV.js";import{C as pe}from"./code-Bh0iG-EL.js";import{S as be}from"./settings-CSYLqhyU.js";import{S as ge}from"./share-2-CwU1PQxU.js";import{L as fe}from"./link-EjgMawRu.js";import{R as je}from"./rotate-ccw-C5cbz5Ew.js";import{A as ve}from"./arrow-right-uAsXqwNa.js";import{S as Ne}from"./smartphone-ewxUynRR.js";import"./index-_nftuPOU.js";import"./index-C38VFtOl.js";import"./index-CjuUx4b5.js";import"./index-Cff7j1dh.js";import"./chevron-down-BwC0H5jo.js";import"./check-WoqjMYuF.js";import"./radio-group-BjltNDB1.js";import"./circle-BfUTHkiN.js";import"./separator-3yH5arB6.js";import"./index-CuckYF6g.js";import"./trash-2-B0C8EAKm.js";import"./index-D4HqgO5_.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),we=e("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),ke=e("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),Ce=e("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Se=e("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),$e=e("PanelRightOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]]),Te=e("SquareStack",[["path",{d:"M4 10c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"4i38lg"}],["path",{d:"M10 16c-1.1 0-2-.9-2-2v-4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"mlte4a"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2",key:"1fa9i4"}]]),ze=e("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Fe=({formId:e,config:r,device:o,disabled:l})=>{const[d,c]=s.useState(null),[m,h]=s.useState([]),[u,x]=s.useState(!0),[p,b]=s.useState({}),[g,f]=s.useState(!1),[j,v]=s.useState({}),N=()=>{switch(o){case"mobile":return"375px";case"tablet":return"768px";default:return"100%"}},{getVisibleFields:y}=H(m,p),w=y,k=s.useMemo(()=>{if(!d)return null;const e={columns:Math.max(4,d.layout?.columns||4),gridGap:d.layout?.grid_gap||"md",responsive:d.layout?.responsive??!0};return new U(e)},[d?.layout]),C=s.useMemo(()=>k?k.calculateFieldPositions(w):[],[k,w]),S=s.useMemo(()=>k?k.getContainerClasses():"",[k]);s.useEffect(()=>{!l&&e&&$()},[e,l]);const $=async()=>{x(!0);try{const{data:s,error:i}=await t.from("forms").select("*").eq("id",e).single();if(i)throw i;const{data:a,error:n}=await t.from("form_fields").select("*").eq("form_id",e).order("order_index");if(n)throw n;const r={...s,url_params_config:s.url_params_config||void 0,layout:"object"==typeof s.layout&&s.layout?s.layout:{columns:4,grid_gap:"md",responsive:!0},background:s.background||void 0};c(r),h(a.map(e=>({...e,options:e.options?Array.isArray(e.options)?e.options:JSON.parse(e.options):void 0})))}catch(s){}finally{x(!1)}};if(l)return i.jsx("div",{className:"flex items-center justify-center h-64 bg-muted rounded-lg",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx("div",{className:"mb-2",children:"Preview not available"}),i.jsx("div",{className:"text-sm",children:"Form must be published to preview embed"})]})});if(u)return i.jsx("div",{className:"border rounded-lg overflow-hidden",style:{width:N(),margin:"0 auto"},children:i.jsx("div",{className:"h-96 bg-gradient-subtle flex items-center justify-center",children:i.jsx(a,{className:"h-8 w-8 animate-spin text-primary"})})});if(!d)return i.jsx("div",{className:"border rounded-lg overflow-hidden",style:{width:N(),margin:"0 auto"},children:i.jsx("div",{className:"h-96 bg-gradient-subtle flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx("div",{className:"mb-2",children:"Form not found"}),i.jsx("div",{className:"text-sm",children:"Unable to load form data"})]})})});return i.jsxs("div",{className:"border rounded-lg overflow-hidden shadow-lg relative",style:{width:N(),margin:"0 auto",maxHeight:"600px",overflowY:"auto",fontFamily:d.font_family||"inherit",...(()=>{if(!d.background)return{};switch(d.background.type){case"color":return{backgroundColor:d.background.value};case"gradient":return{background:d.background.value};case"image":return{backgroundImage:`url(${d.background.value})`,backgroundSize:d.background.size||"cover",backgroundPosition:d.background.position||"center",backgroundRepeat:"no-repeat"};default:return{}}})()},children:[!d.background?.type&&i.jsx("div",{className:"absolute inset-0 bg-background -z-10"}),"image"===d.background?.type&&void 0!==d.background.opacity&&d.background.opacity>0&&i.jsx("div",{className:"absolute inset-0 bg-background pointer-events-none",style:{opacity:d.background.opacity/100}}),!r.hideTitle&&i.jsxs("div",{className:"p-6 border-b relative z-10",style:{background:d.background?"transparent":"linear-gradient(to right, hsl(var(--primary) / 0.05), hsl(var(--accent) / 0.05))"},children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(L,{variant:"outline",className:"text-xs",children:"Live Preview"})}),d.logo_url&&i.jsx("img",{src:d.logo_url,alt:"Form logo",className:"h-12 mb-4 object-contain"}),i.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:d.primary_color||"hsl(var(--foreground))"},children:d.title}),!r.hideDescription&&d.description&&i.jsx("p",{className:"text-muted-foreground",children:d.description})]}),i.jsx("div",{className:"p-6 relative z-10",children:g?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(q,{className:"h-16 w-16 text-success mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Form Submitted!"}),i.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:d.thank_you_message||"Thank you for your submission!"})]}):i.jsx("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return w.forEach(s=>{if(!s.required||p[s.id]&&""!==p[s.id]||(e[s.id]=`${s.label} is required`),p[s.id])switch(s.type){case"email":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p[s.id])||(e[s.id]="Please enter a valid email address");break;case"phone":/^\+?[\d\s\-\(\)]+$/.test(p[s.id])||(e[s.id]="Please enter a valid phone number")}}),v(e),0===Object.keys(e).length})()&&f(!0)},children:0===w.length?i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx("p",{children:"No fields have been added to this form yet."}),i.jsx("p",{className:"text-sm mt-1",children:"Add fields using the field palette to see them here."})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`w-full ${S}`,children:w.map(e=>{const s=C.find(s=>s.id===e.id),t=s&&k?k.generateGridClasses(s):"";return i.jsxs("div",{className:`${t} space-y-2`,children:[i.jsx(I,{field:e,fields:w,formData:p,value:p[e.id],onChange:s=>((e,s)=>{b(t=>({...t,[e]:s})),j[e]&&v(s=>({...s,[e]:""}))})(e.id,s),isPreview:!1}),j[e.id]&&i.jsx("p",{className:"text-sm text-destructive flex items-center gap-1",children:j[e.id]})]},e.id)})}),i.jsx("div",{className:"pt-4 border-t col-span-full",children:i.jsx(n,{type:"submit",className:"w-full",style:{backgroundColor:d.primary_color,color:"#ffffff"},children:"Submit Form"})})]})})}),i.jsx("div",{className:"px-6 py-4 border-t bg-muted/50 text-center relative z-10",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[i.jsx(L,{variant:"outline",children:"published"===d.status?"Live Preview":"Draft Preview"}),i.jsx("span",{children:"â€¢"}),i.jsxs("span",{children:[w.length," field",1!==w.length?"s":""]})]})})]})},Ee=[{id:"inline",name:"Inline",icon:Te,description:"Embedded directly in page content",gradient:"from-purple-50 to-violet-100 dark:from-purple-950/30 dark:to-violet-900/30",iconBg:"bg-purple-500"},{id:"popup",name:"Popup",icon:Se,description:"Center modal overlay",gradient:"from-cyan-50 to-teal-100 dark:from-cyan-950/30 dark:to-teal-900/30",iconBg:"bg-teal-500"},{id:"slidein",name:"Slider",icon:$e,description:"Side panel with tab trigger",gradient:"from-blue-50 to-indigo-100 dark:from-blue-950/30 dark:to-indigo-900/30",iconBg:"bg-blue-500"}],Le=({value:e,onChange:s})=>i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ee.map(t=>{const a=t.icon,n=e===t.id;return i.jsxs(r,{className:o("relative cursor-pointer transition-all duration-300 hover:scale-105","hover:shadow-lg overflow-hidden group",n&&"ring-2 ring-primary shadow-lg scale-105"),onClick:()=>s(t.id),children:[i.jsx("div",{className:o("absolute inset-0 bg-gradient-to-br opacity-50 group-hover:opacity-70 transition-opacity",t.gradient)}),i.jsxs("div",{className:"relative p-6 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:o("w-12 h-12 rounded-full flex items-center justify-center",t.iconBg,"shadow-md"),children:i.jsx(a,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-foreground",children:t.name}),i.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:t.description})]})]}),n&&i.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:i.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})]},t.id)})}),Pe=({width:e,height:s,onWidthChange:t,onHeightChange:a})=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx(S,{children:"Width"}),i.jsx("div",{className:"flex gap-2 mb-2",children:[{label:"Full Width",value:"100%"},{label:"Standard",value:"600px"},{label:"Compact",value:"400px"}].map(s=>i.jsx(n,{type:"button",variant:e===s.value?"default":"outline",size:"sm",onClick:()=>t(s.value),className:"flex-1",children:s.label},s.value))}),i.jsx(C,{value:e,onChange:e=>t(e.target.value),placeholder:"e.g., 600px or 100%"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(S,{children:"Height"}),i.jsx("div",{className:"flex gap-2 mb-2",children:[{label:"Standard",value:"600px"},{label:"Tall",value:"800px"},{label:"Auto",value:"auto"}].map(e=>i.jsx(n,{type:"button",variant:s===e.value?"default":"outline",size:"sm",onClick:()=>a(e.value),className:"flex-1",children:e.label},e.value))}),i.jsx(C,{value:s,onChange:e=>a(e.target.value),placeholder:"e.g., 600px or auto"})]})]}),Be=[{id:"light",name:"Light",icon:G,gradient:"from-white to-gray-100",iconColor:"text-yellow-500"},{id:"dark",name:"Dark",icon:Y,gradient:"from-gray-900 to-gray-800",iconColor:"text-blue-400"},{id:"auto",name:"Auto",icon:Z,gradient:"from-gray-400 to-gray-600",iconColor:"text-purple-400"}],Ie=({value:e,onChange:s})=>i.jsxs("div",{className:"space-y-3",children:[i.jsx(S,{children:"Theme"}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:Be.map(t=>{const a=t.icon,n=e===t.id;return i.jsx(r,{className:o("cursor-pointer transition-all duration-200 hover:scale-105","overflow-hidden group",n&&"ring-2 ring-primary shadow-md"),onClick:()=>s(t.id),children:i.jsxs("div",{className:o("p-4 flex flex-col items-center gap-2","bg-gradient-to-br",t.gradient),children:[i.jsx(a,{className:o("w-8 h-8",t.iconColor)}),i.jsx("span",{className:o("text-sm font-medium","dark"===t.id?"text-white":"text-gray-900"),children:t.name})]})},t.id)})})]}),Re=[{name:"None",value:"none",Icon:null},{name:"Message",value:"MessageCircle",Icon:K},{name:"Sparkles",value:"Sparkles",Icon:J},{name:"Bell",value:"Bell",Icon:ye},{name:"Star",value:"Star",Icon:Q},{name:"Heart",value:"Heart",Icon:X},{name:"Zap",value:"Zap",Icon:ee},{name:"Gift",value:"Gift",Icon:se},{name:"Mail",value:"Mail",Icon:te},{name:"Phone",value:"Phone",Icon:ie},{name:"Send",value:"Send",Icon:ae}],De=({value:e,onChange:s,mode:t})=>{const a=Re.find(s=>s.value===e);return i.jsxs("div",{className:"space-y-2",children:[i.jsx(S,{className:"text-sm font-medium",children:"Custom Icon"}),i.jsxs($,{value:e,onValueChange:s,children:[i.jsx(T,{children:i.jsx(z,{placeholder:"Select icon..."})}),i.jsx(F,{children:Re.map(e=>{const s=e.Icon;return i.jsx(E,{value:e.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[s&&i.jsx(s,{className:"h-4 w-4"}),i.jsx("span",{children:e.name})]})},e.value)})})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(S,{className:"text-xs text-muted-foreground",children:"Or use custom icon URL"}),i.jsx(C,{value:e.startsWith("http")?e:"",onChange:e=>s(e.target.value),placeholder:"https://example.com/icon.svg",className:"text-sm"})]}),e&&"none"!==e&&i.jsxs("div",{className:"mt-3 p-3 border rounded-lg bg-muted/50",children:[i.jsx("span",{className:"text-xs text-muted-foreground mb-2 block",children:"Preview:"}),i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md w-fit",children:[a?.Icon&&"none"!==e?i.jsx(a.Icon,{className:"h-5 w-5"}):e.startsWith("http")?i.jsx("img",{src:e,alt:"Custom icon",className:"h-5 w-5"}):null,i.jsx("span",{className:"text-sm font-medium",children:"tab"===t?"Try me!":"Button Text"})]})]})]})},Oe=["#8B5CF6","#0EA5E9","#10B981","#F59E0B","#EF4444"],_e=({mode:e,config:s,onChange:t})=>i.jsxs(r,{className:"p-6 space-y-6",children:["popup"===e&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(S,{className:"text-sm font-medium",children:"Popup Size"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:["small","medium","large"].map(e=>i.jsx(n,{variant:s.popupSize===e?"default":"outline",onClick:()=>t({popupSize:e}),className:"capitalize",children:e},e))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(S,{htmlFor:"button-text",className:"text-sm font-medium",children:"Button Text"}),i.jsxs("div",{className:"relative",children:[i.jsx(C,{id:"button-text",value:s.buttonText,onChange:e=>{const s=e.target.value.slice(0,24);t({buttonText:s})},maxLength:24,placeholder:"Click me!",className:"pr-16"}),i.jsxs("span",{className:"absolute right-3 top-2.5 text-xs text-muted-foreground",children:[s.buttonText.length,"/24"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(S,{htmlFor:"button-color",className:"text-sm font-medium",children:"Button Color"}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx(C,{id:"button-color",type:"color",value:s.buttonColor,onChange:e=>t({buttonColor:e.target.value}),className:"w-16 h-10 cursor-pointer"}),i.jsx("div",{className:"flex gap-1",children:Oe.map(e=>i.jsx("button",{className:"w-8 h-8 rounded border-2 border-border hover:scale-110 transition-transform",style:{backgroundColor:e},onClick:()=>t({buttonColor:e}),"aria-label":`Set color to ${e}`},e))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(S,{className:"text-sm font-medium",children:"Font Size (px)"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:s.buttonFontSize})]}),i.jsx(R,{value:[s.buttonFontSize],onValueChange:([e])=>t({buttonFontSize:e}),min:12,max:32,step:1})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(S,{className:"text-sm font-medium",children:"Rounded Corners (%)"}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.buttonBorderRadius,"%"]})]}),i.jsx(R,{value:[s.buttonBorderRadius],onValueChange:([e])=>t({buttonBorderRadius:e}),min:0,max:100,step:5}),i.jsx("div",{className:"flex gap-3 justify-center mt-4",children:[0,50,100].map(e=>i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx("div",{className:"w-16 h-10 flex items-center justify-center text-xs text-white font-medium transition-all",style:{backgroundColor:s.buttonColor,borderRadius:`${e}%`},children:"Text"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[e,"%"]})]},e))})]}),i.jsxs("div",{className:"flex items-center justify-between py-2",children:[i.jsxs("div",{children:[i.jsx(S,{htmlFor:"button-as-text",className:"text-sm font-medium",children:"Change Button to Text"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Show text link instead of button"})]}),i.jsx(B,{id:"button-as-text",checked:s.buttonAsText,onCheckedChange:e=>t({buttonAsText:e})})]}),"slidein"===e&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(S,{className:"text-sm font-medium",children:"Slide Direction"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(n,{variant:"left"===s.slideDirection?"default":"outline",onClick:()=>t({slideDirection:"left"}),children:"From Left"}),i.jsx(n,{variant:"right"===s.slideDirection?"default":"outline",onClick:()=>t({slideDirection:"right"}),children:"From Right"})]})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[i.jsx(S,{className:"text-sm font-medium",children:"Icon & Tooltip"}),i.jsx(De,{value:s.buttonIcon||"",onChange:e=>t({buttonIcon:e}),mode:"slidein"===e?"tab":"button"}),s.buttonIcon&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(S,{className:"text-sm",children:"Icon Size (px)"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:s.iconSize||20})]}),i.jsx(R,{value:[s.iconSize||20],onValueChange:([e])=>t({iconSize:e}),min:16,max:32,step:2})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(S,{htmlFor:"tooltip",className:"text-sm",children:"Tooltip Text"}),i.jsxs("div",{className:"relative",children:[i.jsx(C,{id:"tooltip",value:s.tooltipText||"",onChange:e=>t({tooltipText:e.target.value.slice(0,50)}),maxLength:50,placeholder:"Hover text...",className:"pr-16"}),i.jsxs("span",{className:"absolute right-3 top-2.5 text-xs text-muted-foreground",children:[(s.tooltipText||"").length,"/50"]})]})]})]}),"slidein"===e&&i.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[i.jsx(S,{htmlFor:"tab-text",className:"text-sm font-medium",children:"Side Tab Text"}),i.jsxs("div",{className:"relative",children:[i.jsx(C,{id:"tab-text",value:s.tabText||"Try me!",onChange:e=>t({tabText:e.target.value.slice(0,15)}),maxLength:15,placeholder:"Try me!",className:"pr-16"}),i.jsxs("span",{className:"absolute right-3 top-2.5 text-xs text-muted-foreground",children:[(s.tabText||"Try me!").length,"/15"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"This text appears on the side tab when the form is closed"})]})]}),Ae={wordpress:[{number:1,title:"Copy the embed code",description:'Click the "Copy Embed Code" button above to copy your form\'s embed code to your clipboard.'},{number:2,title:"Open WordPress Editor",description:'Navigate to the page where you want to embed the form. Click the "Add Block" (+) button in your editor, then search for "Custom HTML" and add it to your page.',tip:'For Gutenberg editor, use "Custom HTML" block. For Classic editor, switch to "Text" mode before pasting.'},{number:3,title:"Paste and save",description:'Paste the embed code into the Custom HTML block. Click "Update" or "Publish" to save your changes.'},{number:4,title:"Preview your form",description:"View the page to see your embedded form live. The form will automatically adjust to your theme and look great on all devices."}],squarespace:[{number:1,title:"Copy the embed code",description:'Click the "Copy Embed Code" button above to copy your form\'s embed code.'},{number:2,title:"Edit your Squarespace page",description:'In the page editor, click where you want to add the form. Click the "+" icon to add a new block, then choose "Embed" from the block menu.',tip:"Squarespace may require a Business plan or higher for custom code embedding."},{number:3,title:"Paste and configure",description:"In the embed settings, paste your code. Adjust width and height if needed, or leave them on auto for responsive sizing. Click outside the block to apply."},{number:4,title:"Publish changes",description:'Click "Save" at the top of the editor. Your form is now live on your Squarespace site.'}],webflow:[{number:1,title:"Copy the embed code",description:'Click the "Copy Embed Code" button above to copy your form\'s embed code.'},{number:2,title:"Add Custom Code component",description:'Open your Webflow project in Designer. From the Add Elements panel, drag an "Embed" component onto your page where you want the form to appear.',tip:'Set "Display" to "Block" on the embed component for better responsive behavior.'},{number:3,title:"Paste the code",description:'Double-click the Embed component to open its settings. Paste your embed code into the text area, then click "Save & Close".'},{number:4,title:"Publish your site",description:'Click "Publish" in the top right corner of Designer. Select the domains you want to publish to. Your form is now embedded and live.'}],shopify:[{number:1,title:"Copy the embed code",description:'Click the "Copy Embed Code" button above to copy your form\'s embed code.'},{number:2,title:"Access theme code editor",description:'In your Shopify admin, go to Online Store â†’ Themes. Click "Actions" dropdown next to your active theme, then select "Edit code".',tip:"For page-specific forms, edit the page template file (e.g., page.contact.liquid). For store-wide forms, edit theme.liquid."},{number:3,title:"Paste the code",description:'Find the template file you want to edit (like page.liquid or a specific page template). Locate where you want the form to appear in the HTML, paste the embed code, and click "Save".'},{number:4,title:"Preview and publish",description:'Click "Preview" in the theme editor to test your form. If everything looks good, the changes are automatically live on your store.'}],wix:[{number:1,title:"Copy the embed code",description:'Click the "Copy Embed Code" button above to copy your form\'s embed code.'},{number:2,title:"Add HTML element",description:'Open your Wix editor and click the "Add" (+) button on the left sidebar. Navigate to "Embed" â†’ "Custom Embeds" â†’ "HTML iframe".',tip:'Use "HTML iframe" for best compatibility with script-based embeds.'},{number:3,title:"Paste and configure",description:'Click "Enter Code" in the HTML iframe settings. Paste your embed code, then adjust the element\'s size and position on your page as needed.'},{number:4,title:"Publish your site",description:'Click "Publish" at the top right of the Wix editor. Your form is now live on your Wix site and ready to collect responses.'}],html:[{number:1,title:"Copy the embed code",description:'Click the "Copy Embed Code" button above to copy your form\'s embed code.',tip:"The embed code contains an environment-specific script URL. Always copy the full code from this pageâ€”never modify the script URL or use examples from other sources."},{number:2,title:"Open your HTML file",description:"Use your preferred code editor to open the HTML file where you want to embed the form. Locate the page or section where the form should appear.",tip:"Place the code right before the closing </body> tag for popup/slider modes, or inline within your content area for inline mode."},{number:3,title:"Paste the code exactly as copied",description:"Find the location in your HTML where you want the form (typically inside the <body> element). Paste the embed code exactly as copied, without modifying any URLs, and save the file.",tip:"Do not change the script src URLâ€”it must match your app's domain. If testing locally, the form will load from the script's origin, not from file:// protocol."},{number:4,title:"Upload and test",description:"Upload the modified HTML file to your web server. Visit the page in a browser to verify the form appears correctly and test form submission.",tip:"For local testing before upload, the embed will work in local HTML filesâ€”the SDK automatically detects its origin from the script tag."}]},Me={wordpress:"WordPress",squarespace:"Squarespace",webflow:"Webflow",shopify:"Shopify",wix:"Wix",html:"Generic HTML"},Ve=({platform:e,embedCode:t,onCopyCode:a})=>{const[r,o]=s.useState(!1),l=Ae[e]||Ae.html,d=()=>{a(t),o(!0),setTimeout(()=>o(!1),2e3)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["How to embed with ",Me[e]||"your platform"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow these steps to add your form to your website"})]}),i.jsx("div",{className:"space-y-6",children:l.map(e=>i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-semibold text-sm",children:e.number}),i.jsxs("div",{className:"flex-1 space-y-2 pt-0.5",children:[i.jsx("h4",{className:"font-semibold text-foreground",children:e.title}),i.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description}),1===e.number&&i.jsx(n,{onClick:d,variant:"outline",className:"mt-3",size:"sm",children:r?i.jsxs(i.Fragment,{children:[i.jsx(ne,{className:"h-4 w-4 mr-2"}),"Copied!"]}):i.jsxs(i.Fragment,{children:[i.jsx(re,{className:"h-4 w-4 mr-2"}),"Copy Embed Code"]})}),e.tip&&i.jsx("div",{className:"mt-3 p-3 bg-muted/50 rounded-lg border border-border",children:i.jsxs("p",{className:"text-xs text-muted-foreground leading-relaxed",children:[i.jsx("span",{className:"font-medium text-foreground",children:"ðŸ’¡ Tip:"})," ",e.tip]})})]})]},e.number))}),i.jsx("div",{className:"pt-4 border-t",children:i.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:["Need more help?"," ",i.jsxs("a",{href:"https://docs.formsedge.com/embedding",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline inline-flex items-center gap-1",children:["View detailed documentation",i.jsx(oe,{className:"h-3 w-3"})]})]})})]})},He=({targetSelector:e=".embed-preview-container"})=>{const[t,a]=s.useState([]),[o,p]=s.useState(!1),[b,g]=s.useState(null),[f,j]=s.useState(!1),[v,N]=s.useState(!0),[y,w]=s.useState(null),k=s.useRef(null),C=s.useRef(null),S=e=>{if(e.id)return`//*[@id="${e.id}"]`;if(e===document.body)return"/html/body";let s="",t=e;for(;t&&t!==document.body;){let e=1,i=t.previousElementSibling;for(;i;)i.tagName===t.tagName&&e++,i=i.previousElementSibling;s=`/${t.tagName.toLowerCase()}[${e}]${s}`,t=t.parentElement}return`/html/body${s}`},$=()=>{p(!0);try{const s=document.querySelector(e);if(!s)return void a([]);const t=s.querySelectorAll("*"),i=[],n=window.getComputedStyle(s),r=s.getBoundingClientRect();i.push({tagName:s.tagName.toLowerCase(),id:s.id||void 0,className:s.className||void 0,zIndex:n.zIndex,pointerEvents:n.pointerEvents,position:n.position,rect:r,isBlocking:"none"!==n.pointerEvents&&"static"!==n.position&&"auto"!==n.zIndex,depth:0,xpath:S(s)}),t.forEach((e,t)=>{const a=window.getComputedStyle(e),n=e.getBoundingClientRect();let r=0,o=e.parentElement;for(;o&&o!==s;)r++,o=o.parentElement;const l="auto"===a.pointerEvents&&"static"!==a.position&&parseInt(a.zIndex)>0&&n.width>0&&n.height>0||"auto"===a.pointerEvents&&"fixed"===a.position&&n.width>.5*window.innerWidth&&n.height>.5*window.innerHeight;i.push({tagName:e.tagName.toLowerCase(),id:e.id||void 0,className:e.className||void 0,zIndex:a.zIndex,pointerEvents:a.pointerEvents,position:a.position,rect:n,isBlocking:l,depth:r,xpath:S(e)})}),i.sort((e,s)=>{const t="auto"===e.zIndex?0:parseInt(e.zIndex),i="auto"===s.zIndex?0:parseInt(s.zIndex);return t!==i?i-t:e.depth-s.depth}),a(i),N(0===i.length),w(new Date),i.length<10&&!v&&setTimeout($,1e3)}finally{p(!1)}};s.useEffect(()=>{const s=document.querySelector(e),t=setTimeout($,2e3);if(!s)return()=>clearTimeout(t);const i=new MutationObserver(e=>{e.some(e=>e.addedNodes.length>0||e.removedNodes.length>0)&&(C.current&&clearTimeout(C.current),C.current=setTimeout($,800))});return i.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),()=>{clearTimeout(t),C.current&&clearTimeout(C.current),i.disconnect()}},[e]);const T=()=>{g(null),k.current&&(k.current.style.display="none")};s.useEffect(()=>()=>{k.current&&k.current.remove()},[]);const z=e=>{let s=e.tagName;if(e.id&&(s+=`#${e.id}`),e.className&&"string"==typeof e.className){const t=e.className.split(" ").filter(e=>e.length>0);t.length>0&&(s+=`.${t[0]}${t.length>1?"...":""}`)}return s},F=f?t.filter(e=>e.isBlocking):t,E=t.filter(e=>e.isBlocking).length;return i.jsxs(r,{children:[i.jsxs(l,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs(d,{className:"flex items-center gap-2",children:[i.jsx(de,{className:"h-5 w-5"}),"Element Stack Diagnostic"]}),i.jsx(c,{children:"Z-index and pointer-events inspector for embed preview"}),y&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1.5",children:["Last scanned: ",y.toLocaleTimeString()]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(n,{variant:"outline",size:"sm",onClick:()=>j(!f),children:f?i.jsxs(i.Fragment,{children:[i.jsx(he,{className:"h-4 w-4 mr-2"}),"Show All"]}):i.jsxs(i.Fragment,{children:[i.jsx(ce,{className:"h-4 w-4 mr-2"}),"Show Blocking"]})}),i.jsxs(n,{variant:"outline",size:"sm",onClick:$,disabled:o,children:[i.jsx(m,{className:"h-4 w-4 mr-2 "+(o?"animate-spin":"")}),o?"Scanning...":"Rescan Now"]})]})]}),!o&&i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Auto-scans every 2 seconds during loading. Click "Rescan Now" if the preview appears but elements aren\'t detected.'})]}),i.jsxs(h,{children:[v&&0===F.length&&!o&&i.jsx(u,{className:"mb-4 border-muted-foreground/20 bg-muted/30",children:i.jsx(x,{children:"Waiting for preview content to load... This may take a few seconds."})}),E>0&&i.jsxs(u,{className:"mb-4 border-warning/50 bg-warning/10",children:[i.jsx(ue,{className:"h-4 w-4"}),i.jsxs(x,{children:["Found ",E," potentially blocking element",1!==E?"s":""," with pointer-events: auto and elevated z-index"]})]}),i.jsx(le,{className:"h-[500px] w-full rounded-md border",children:i.jsx("div",{className:"p-4 space-y-2",children:0===F.length?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:f?"No blocking elements detected":"No elements found. Click Rescan to analyze the preview area."}):F.map((e,s)=>i.jsx("div",{className:`p-3 rounded-lg border transition-all cursor-pointer ${e.isBlocking?"border-destructive/50 bg-destructive/5 hover:bg-destructive/10":"border-border hover:bg-muted/50"} ${b===e.xpath?"ring-2 ring-primary":""}`,onMouseEnter:()=>((e,s)=>{if(g(e),!k.current){const e=document.createElement("div");e.id="diagnostic-highlight-overlay",e.style.cssText="\n        position: fixed;\n        pointer-events: none;\n        border: 2px solid #ff6b6b;\n        background: rgba(255, 107, 107, 0.1);\n        z-index: 999999;\n        transition: all 0.2s ease;\n      ",document.body.appendChild(e),k.current=e}const t=k.current;t.style.left=`${s.left}px`,t.style.top=`${s.top}px`,t.style.width=`${s.width}px`,t.style.height=`${s.height}px`,t.style.display="block"})(e.xpath,e.rect),onMouseLeave:T,style:{marginLeft:12*e.depth+"px"},children:i.jsx("div",{className:"flex items-start justify-between gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("code",{className:"text-sm font-mono font-semibold text-foreground",children:z(e)}),e.isBlocking&&i.jsx(L,{variant:"destructive",className:"text-xs",children:"Blocking"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"z-index:"})," ",i.jsx("code",{className:"auto"!==e.zIndex&&parseInt(e.zIndex)>0?"text-warning":"",children:e.zIndex})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"pointer-events:"})," ",i.jsx("code",{className:"auto"===e.pointerEvents?"text-destructive":"text-success",children:e.pointerEvents})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"position:"})," ",i.jsx("code",{children:e.position})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"size:"})," ",i.jsxs("code",{children:[Math.round(e.rect.width),"Ã—",Math.round(e.rect.height)]})]})]})]})})},s))})}),i.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg text-xs space-y-2",children:[i.jsx("div",{className:"font-medium text-foreground",children:"Legend:"}),i.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded border border-destructive/50 bg-destructive/5"}),i.jsx("span",{children:"Potentially blocking (pointer-events: auto + elevated z-index)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded border border-border"}),i.jsx("span",{children:"Non-blocking or transparent"})]})]}),i.jsx("div",{className:"pt-2 border-t border-border/50",children:i.jsxs("p",{children:[i.jsx("strong",{children:"Tip:"})," Hover over elements to highlight them in the preview area. Elements with ",i.jsx("code",{className:"text-destructive",children:"pointer-events: auto"})," and high z-index may block clicks."]})})]})]})]})};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=()=>{const{id:e}=p(),{user:a,loading:o}=b(),[c,m]=s.useState(null),[I,H]=s.useState(!0),[U,q]=s.useState({type:"iframe",width:"100%",height:"600px",position:"center",trigger:"immediate",triggerValue:"",theme:"light",hideTitle:!1,hideDescription:!1,customCss:"",borderRadius:"8px",showBranding:!0}),[G,Y]=s.useState("desktop"),[K,J]=s.useState("script"),[Q,X]=s.useState({mode:"inline",theme:"light",progress:"top",progressColor:"#8B5CF6",autoresize:!0,width:"100%",height:"600px",position:"center",trigger:"immediate",triggerValue:"",mobileFullscreen:!0,hideTitle:!1,hideDescription:!1,backgroundOpacity:100,closeOnSubmit:!1,popupSize:"large",buttonText:"Open Form",buttonColor:"#8B5CF6",buttonFontSize:16,buttonBorderRadius:8,buttonAsText:!1,slideDirection:"right",tabText:"Try me!",buttonIcon:"",iconSize:20,tooltipText:"",customLaunchEnabled:!1,showLaunchButton:!0,preventReopen:!1,closeOnSubmitDelay:0,scrollPercentage:"60"}),[ee,se]=s.useState({}),[ie,ae]=s.useState("wordpress"),[ne,le]=s.useState(!1),{enabled:de}=function(){const[e,i]=s.useState(!1),[a,n]=s.useState(!0);return s.useEffect(()=>{(async()=>{try{const{data:e,error:s}=await t.functions.invoke("admin-system-config",{body:{action:"get_by_category",category:"features"}});if(s)return void i(!1);const a=e.configs?.find(e=>"feature_flags"===e.config_key);i(!!a?.config_value?.diagnostic_enabled)}catch(e){i(!1)}finally{n(!1)}})()},[]),{enabled:e,loading:a}}(),{toast:ce}=g();s.useEffect(()=>{a&&e&&ye()},[a,e]),s.useEffect(()=>{if(c?.url_params_config){const e={};c.url_params_config.forEach(s=>{e[s.name]={value:s.default_value||"",transitive:s.transitive_default||!1}}),se(e)}},[c]);const ye=async()=>{try{const{data:s,error:i}=await t.from("forms").select("id, title, description, owner_id, status, is_public, url_params_config").eq("id",e).single();if(i)throw i;const{data:n}=await t.rpc("can_access_form",{form_id:e,user_id:a?.id});if(!n)return void ce({title:"Access denied",description:"You don't have permission to embed this form",variant:"destructive"});m({...s,url_params_config:s.url_params_config||void 0})}catch(s){ce({title:"Error loading form",description:s.message,variant:"destructive"})}finally{H(!1)}},Te=e=>{navigator.clipboard.writeText(e),ce({title:"Copied to clipboard",description:"Embed code has been copied to your clipboard"})},Ee=s=>{const t=`${window.location.origin}/f/${e}`,i=encodeURIComponent(t),a=encodeURIComponent(c?.title||"Check out this form");let n="";switch(s){case"twitter":n=`https://twitter.com/intent/tweet?text=${a}&url=${i}`;break;case"facebook":n=`https://www.facebook.com/sharer/sharer.php?u=${i}`;break;case"linkedin":n=`https://www.linkedin.com/sharing/share-offsite/?url=${i}`}n&&window.open(n,"_blank","width=600,height=400")},Be=()=>{const s=window.location.origin,t=[];Object.entries(ee).forEach(([e,s])=>{s.value&&!s.transitive&&t.push(`${e}=${s.value}`)});const i=t.length>0?`\n  data-fe-hidden="${t.join(",")}"`:"",a=Object.entries(ee).filter(([e,s])=>s.transitive).map(([e,s])=>e),n=a.length>0?`\n  data-fe-transitive-params="${a.join(",")}"`:"",r=[];Q.width&&"100%"!==Q.width&&r.push(`data-fe-width="${Q.width}"`),Q.height&&"600px"!==Q.height&&r.push(`data-fe-height="${Q.height}"`),"center"!==Q.position&&r.push(`data-fe-position="${Q.position}"`),Q.mobileFullscreen&&r.push('data-fe-mobile-fullscreen="true"'),100!==Q.backgroundOpacity&&r.push(`data-fe-background-opacity="${Q.backgroundOpacity}"`),Q.closeOnSubmit&&r.push('data-fe-close-on-submit="true"'),Q.customLaunchEnabled&&"inline"!==Q.mode&&(r.push(`data-fe-trigger="${Q.trigger}"`),"scroll"===Q.trigger?r.push(`data-fe-scroll-percentage="${Q.scrollPercentage}"`):"time"===Q.trigger&&r.push(`data-fe-delay="${Q.triggerValue}"`),Q.preventReopen&&r.push('data-fe-prevent-reopen="true"')),Q.showLaunchButton||"inline"===Q.mode||r.push('data-fe-auto-launch="true"'),Q.closeOnSubmit&&Q.closeOnSubmitDelay>0&&r.push(`data-fe-close-delay="${Q.closeOnSubmitDelay}"`);const o=r.length>0?"\n  "+r.join("\n  "):"";if("inline"===Q.mode)return`\x3c!-- FormsEdge Inline Embed --\x3e\n<div\n  data-fe-form="${e}"\n  data-fe-mode="inline"\n  data-fe-theme="${Q.theme}"\n  data-fe-progress="${Q.progress}"\n  data-fe-autoresize="${Q.autoresize}"${i}${n}${o}\n></div>\n<script src="${s}/formsedge-embed.js" async><\/script>`;const l=[`data-fe-open="${e}"`,`data-fe-mode="${Q.mode}"`,`data-fe-theme="${Q.theme}"`,`data-fe-popup-size="${Q.popupSize}"`,`data-fe-button-color="${Q.buttonColor}"`,`data-fe-button-font-size="${Q.buttonFontSize}"`,`data-fe-button-radius="${Q.buttonBorderRadius}"`,Q.buttonAsText&&'data-fe-button-as-text="true"',"slidein"===Q.mode&&`data-fe-slide-direction="${Q.slideDirection}"`,"slidein"===Q.mode&&Q.tabText&&`data-fe-tab-text="${Q.tabText}"`,Q.buttonIcon&&`data-fe-icon="${Q.buttonIcon}"`,Q.buttonIcon&&Q.iconSize&&`data-fe-icon-size="${Q.iconSize}"`,Q.tooltipText&&`data-fe-tooltip="${Q.tooltipText}"`].filter(Boolean),d=Object.keys(ee).length>0?"\n  "+Object.entries(ee).map(([e,s])=>s.value&&!s.transitive?`data-fe-param-${e}="${s.value}"`:null).filter(Boolean).join("\n  "):"",c=Q.buttonAsText?"a":"button",m=Q.buttonAsText?`color: ${Q.buttonColor}; text-decoration: underline; font-size: ${Q.buttonFontSize}px; cursor: pointer;`:`background-color: ${Q.buttonColor}; color: white; padding: 12px 24px; font-size: ${Q.buttonFontSize}px; border-radius: ${Q.buttonBorderRadius}%; border: none; cursor: pointer;`;return`\x3c!-- FormsEdge ${{popup:"Popup",slidein:"Slider"}[Q.mode]||"Modal"} Embed --\x3e\n<${c}\n  ${l.join("\n  ")}${i}${n}${o}${d}\n  style="${m}"\n>\n  ${Q.buttonText}\n</${c}>\n<script src="${s}/formsedge-embed.js" async><\/script>`},Re=()=>{X({mode:"inline",theme:"light",progress:"top",progressColor:"#8B5CF6",autoresize:!0,width:"100%",height:"600px",position:"center",trigger:"immediate",triggerValue:"",mobileFullscreen:!0,hideTitle:!1,hideDescription:!1,backgroundOpacity:100,closeOnSubmit:!1,popupSize:"large",buttonText:"Open Form",buttonColor:"#8B5CF6",buttonFontSize:16,buttonBorderRadius:8,buttonAsText:!1,slideDirection:"right",tabText:"Try me!",buttonIcon:"",iconSize:20,tooltipText:"",customLaunchEnabled:!1,showLaunchButton:!0,preventReopen:!1,closeOnSubmitDelay:0,scrollPercentage:"60"}),ce({title:"Settings reset",description:"All settings have been reset to defaults"})},De=e=>{const s="inline"!==e.mode,t=e.customLaunchEnabled&&"immediate"!==e.trigger,i=e.preventReopen,a=e.closeOnSubmit&&e.closeOnSubmitDelay>0,n=!e.showLaunchButton,r="#8B5CF6"!==e.buttonColor||16!==e.buttonFontSize||8!==e.buttonBorderRadius||e.buttonAsText,o=100!==e.backgroundOpacity,l="top"!==e.progress,d=e.mobileFullscreen&&"inline"!==e.mode;return s||t||i||a||n||r||o||l||d},Oe="iframe"===K&&De(Q)?"script":K;if(o||I)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-subtle",children:i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-8 bg-muted rounded w-48"}),i.jsx("div",{className:"h-4 bg-muted rounded w-32"})]})});if(!a)return i.jsx(f,{to:"/auth",replace:!0});if(!c)return i.jsx(f,{to:"/dashboard",replace:!0});const Ae=`${window.location.origin}/f/${c.id}`;return i.jsxs("div",{className:"min-h-screen bg-gradient-subtle",children:[i.jsx("header",{className:"bg-background border-b border-border",children:i.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(n,{variant:"ghost",asChild:!0,children:i.jsxs(j,{to:"/dashboard",children:[i.jsx(xe,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),i.jsxs("div",{children:[i.jsx("h1",{className:"font-semibold text-foreground",children:c.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Embed & Share"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(L,{variant:"published"===c.status?"default":"secondary",children:c.status}),i.jsx(n,{variant:"outline",asChild:!0,children:i.jsx(j,{to:`/forms/${e}/responses`,children:"Responses"})})]})]})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[!c.is_public&&i.jsxs(u,{className:"mb-6 border-warning/50 bg-warning/10",children:[i.jsx(ue,{className:"h-4 w-4 text-warning"}),i.jsx(v,{className:"text-warning",children:"Form is Private"}),i.jsxs(x,{className:"text-warning/90",children:["This form is currently private. The iframe preview won't work until you make it public.",i.jsxs(n,{onClick:async()=>{le(!0);try{const{error:s}=await t.from("forms").update({is_public:!0}).eq("id",e);if(s)throw s;m(e=>e?{...e,is_public:!0}:null),ce({title:"Form is now public",description:"The iframe preview will now work correctly"})}catch(s){ce({title:"Error updating form",description:s.message,variant:"destructive"})}finally{le(!1)}},disabled:ne,size:"sm",variant:"outline",className:"ml-4 border-warning text-warning hover:bg-warning/20",children:[i.jsx(Ce,{className:"h-3 w-3 mr-2"}),ne?"Making Public...":"Make Public Now"]})]})]}),i.jsx(N,{value:K,onValueChange:e=>J(e),className:"mb-8",children:i.jsxs(y,{className:"grid w-full max-w-md mx-auto grid-cols-2",children:[i.jsxs(w,{value:"script",children:[i.jsx(pe,{className:"h-4 w-4 mr-2"}),"Script-based (Recommended)"]}),i.jsx(w,{value:"iframe",children:"Legacy iframe"})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-6",children:["published"!==c.status&&i.jsx(r,{className:"border-warning bg-warning/5",children:i.jsxs(h,{className:"pt-6",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(be,{className:"h-4 w-4 text-warning"}),i.jsx("span",{className:"text-sm font-medium text-warning",children:"Form must be published to be embedded"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Publish your form from the builder to make it available for embedding."})]})}),i.jsxs(r,{children:[i.jsx(l,{children:i.jsxs(d,{className:"flex items-center space-x-2",children:[i.jsx(oe,{className:"h-4 w-4"}),i.jsx("span",{children:"Quick Share"})]})}),i.jsxs(h,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(S,{htmlFor:"form-url",children:"Form URL"}),i.jsxs("div",{className:"flex space-x-2 mt-1",children:[i.jsx(C,{id:"form-url",value:Ae,readOnly:!0,className:"font-mono text-sm"}),i.jsx(n,{variant:"outline",size:"sm",onClick:()=>Te(Ae),children:i.jsx(re,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(D,{children:[i.jsx(O,{asChild:!0,children:i.jsxs(n,{variant:"outline",size:"sm",className:"flex-1",children:[i.jsx(ge,{className:"h-4 w-4 mr-2"}),"Share on Social"]})}),i.jsxs(_,{children:[i.jsxs(A,{children:[i.jsx(M,{children:"Share This Form"}),i.jsx(V,{children:"Choose a platform to share your form"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(n,{variant:"outline",className:"w-full justify-start",onClick:()=>Ee("twitter"),children:[i.jsx(ze,{className:"h-4 w-4 mr-2"}),"Share on Twitter"]}),i.jsxs(n,{variant:"outline",className:"w-full justify-start",onClick:()=>Ee("facebook"),children:[i.jsx(we,{className:"h-4 w-4 mr-2"}),"Share on Facebook"]}),i.jsxs(n,{variant:"outline",className:"w-full justify-start",onClick:()=>Ee("linkedin"),children:[i.jsx(ke,{className:"h-4 w-4 mr-2"}),"Share on LinkedIn"]}),i.jsxs(n,{variant:"outline",className:"w-full justify-start",onClick:()=>{const s=`${window.location.origin}/f/${e}`;Te(s),ce({title:"Link copied!",description:"Form URL copied to clipboard"})},children:[i.jsx(fe,{className:"h-4 w-4 mr-2"}),"Copy Link"]})]})]})]}),i.jsxs(n,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{const s=`${window.location.origin}/f/${e}`,t=encodeURIComponent(`Check out this form: ${c?.title||"Form"}`),i=encodeURIComponent(`Hi,\n\nI'd like to share this form with you: ${c?.title}\n\n${c?.description?c.description+"\n\n":""}You can fill it out here: ${s}\n\nBest regards`);window.location.href=`mailto:?subject=${t}&body=${i}`},children:[i.jsx(te,{className:"h-4 w-4 mr-2"}),"Send Email"]})]})]})]}),"script"===K&&i.jsx(i.Fragment,{children:i.jsxs(r,{children:[i.jsx(l,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(d,{className:"flex items-center space-x-2",children:[i.jsx(be,{className:"h-4 w-4"}),i.jsx("span",{children:"Embed Configuration"})]}),i.jsxs(n,{variant:"outline",size:"sm",onClick:Re,children:[i.jsx(je,{className:"h-4 w-4 mr-2"}),"Reset"]})]})}),i.jsx(h,{children:i.jsxs(N,{defaultValue:"design",className:"space-y-6",children:[i.jsxs(y,{className:"grid w-full grid-cols-3",children:[i.jsx(w,{value:"design",children:"Design"}),i.jsx(w,{value:"advanced",children:"Advanced"}),i.jsx(w,{value:"sdk",children:"Embed SDK"})]}),i.jsxs(k,{value:"design",className:"space-y-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx(S,{className:"text-base font-semibold",children:"Embed Mode"}),i.jsx(Le,{value:Q.mode,onChange:e=>X({...Q,mode:e})})]}),("popup"===Q.mode||"slidein"===Q.mode)&&i.jsxs("div",{className:"pt-4 border-t border-border",children:[i.jsx(S,{className:"text-base font-semibold mb-4 block",children:"Trigger Button Settings"}),i.jsx(_e,{mode:Q.mode,config:{popupSize:Q.popupSize,buttonText:Q.buttonText,buttonColor:Q.buttonColor,buttonFontSize:Q.buttonFontSize,buttonBorderRadius:Q.buttonBorderRadius,buttonAsText:Q.buttonAsText,slideDirection:Q.slideDirection,tabText:Q.tabText,buttonIcon:Q.buttonIcon,iconSize:Q.iconSize,tooltipText:Q.tooltipText},onChange:e=>X({...Q,...e})})]}),"inline"===Q.mode&&i.jsx(Pe,{width:Q.width,height:Q.height,onWidthChange:e=>X({...Q,width:e}),onHeightChange:e=>X({...Q,height:e})}),i.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[i.jsx(S,{className:"text-base font-semibold",children:"Display Options"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"mobile-fullscreen",className:"text-sm",children:["Mobile Full-screen",i.jsx("p",{className:"text-xs text-muted-foreground font-normal mt-1",children:"Auto-expand to full screen on mobile devices"})]}),i.jsx(B,{id:"mobile-fullscreen",checked:Q.mobileFullscreen,onCheckedChange:e=>X({...Q,mobileFullscreen:e})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{htmlFor:"hide-title",className:"text-sm",children:"Hide Form Title"}),i.jsx(B,{id:"hide-title",checked:Q.hideTitle,onCheckedChange:e=>X({...Q,hideTitle:e})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{htmlFor:"hide-desc",className:"text-sm",children:"Hide Form Description"}),i.jsx(B,{id:"hide-desc",checked:Q.hideDescription,onCheckedChange:e=>X({...Q,hideDescription:e})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(S,{className:"text-sm",children:["Background Opacity: ",Q.backgroundOpacity,"%"]}),i.jsx(R,{value:[Q.backgroundOpacity],onValueChange:e=>X({...Q,backgroundOpacity:e[0]}),min:0,max:100,step:5})]})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsx(Ie,{value:Q.theme,onChange:e=>X({...Q,theme:e})})})]}),i.jsxs(k,{value:"advanced",className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{className:"text-base font-semibold",children:"Behaviour"}),"inline"===Q.mode&&i.jsx(L,{variant:"outline",className:"text-xs",children:"Some features only apply to overlay modes"})]}),"inline"===Q.mode&&i.jsx(r,{className:"border-amber-500/50 bg-amber-50 dark:bg-amber-950/20",children:i.jsx(h,{className:"py-4",children:i.jsx("div",{className:"flex items-start gap-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100 mb-1",children:"Want to use custom triggers and launch controls?"}),i.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 mb-3",children:"Switch to an overlay mode (popup, slide-in, etc.) to enable advanced behaviour options."}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{X({...Q,mode:"popup"}),ce({title:"Switched to Popup mode",description:"Advanced behaviour options are now available"})},className:"h-8",children:[i.jsx(Se,{className:"h-3 w-3 mr-1"}),"Popup"]}),i.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{X({...Q,mode:"slidein"}),ce({title:"Switched to Slider mode",description:"Advanced behaviour options are now available"})},className:"h-8",children:[i.jsx($e,{className:"h-3 w-3 mr-1"}),"Slider"]})]})]})})})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"custom-launch",className:"text-sm font-normal",children:["Custom launch options","inline"===Q.mode&&i.jsx("span",{className:"block text-xs text-muted-foreground font-normal mt-1",children:"Available in overlay modes (popup, slide-in, etc.)"})]}),i.jsx(B,{id:"custom-launch",checked:Q.customLaunchEnabled,onCheckedChange:e=>X({...Q,customLaunchEnabled:e,trigger:e?Q.trigger:"immediate"}),disabled:"inline"===Q.mode})]}),Q.customLaunchEnabled&&i.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-primary/20",children:[i.jsx(S,{className:"text-sm",children:"Launch trigger"}),i.jsxs($,{value:Q.trigger,onValueChange:e=>X({...Q,trigger:e,triggerValue:"scroll"===e?"60":"time"===e?"5":""}),children:[i.jsx(T,{children:i.jsx(z,{})}),i.jsxs(F,{children:[i.jsx(E,{value:"immediate",children:"On page load"}),i.jsx(E,{value:"exit",children:"On exit intent"}),i.jsx(E,{value:"scroll",children:"After scrolling"}),i.jsx(E,{value:"time",children:"After a set time"})]})]}),"scroll"===Q.trigger&&i.jsxs($,{value:Q.scrollPercentage,onValueChange:e=>X({...Q,scrollPercentage:e,triggerValue:e}),children:[i.jsx(T,{children:i.jsx(z,{})}),i.jsxs(F,{children:[i.jsx(E,{value:"30",children:"30% of page"}),i.jsx(E,{value:"60",children:"60% of page"}),i.jsx(E,{value:"90",children:"90% of page"})]})]}),"time"===Q.trigger&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(C,{type:"number",min:"1",max:"60",value:Q.triggerValue,onChange:e=>X({...Q,triggerValue:e.target.value}),placeholder:"5",className:"flex-1"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"seconds"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"show-button",className:"text-sm font-normal",children:["Show launch button","inline"===Q.mode&&i.jsx("span",{className:"block text-xs text-muted-foreground font-normal mt-1",children:"Not applicable in inline mode"})]}),i.jsx(B,{id:"show-button",checked:Q.showLaunchButton,onCheckedChange:e=>X({...Q,showLaunchButton:e}),disabled:"inline"===Q.mode})]}),Q.customLaunchEnabled&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"prevent-reopen",className:"text-sm font-normal",children:["Prevent re-open on close",i.jsx("span",{className:"block text-xs text-muted-foreground font-normal mt-1",children:"Form won't reappear after user closes it"})]}),i.jsx(B,{id:"prevent-reopen",checked:Q.preventReopen,onCheckedChange:e=>X({...Q,preventReopen:e})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"close-submit",className:"text-sm font-normal",children:["Close on submit","inline"===Q.mode&&i.jsx("span",{className:"block text-xs text-muted-foreground font-normal mt-1",children:"Not applicable in inline mode"})]}),i.jsx(B,{id:"close-submit",checked:Q.closeOnSubmit,onCheckedChange:e=>X({...Q,closeOnSubmit:e}),disabled:"inline"===Q.mode})]}),Q.closeOnSubmit&&i.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[i.jsx(S,{className:"text-sm text-muted-foreground",children:"Delay for"}),i.jsx(C,{type:"number",min:"0",max:"30",value:Q.closeOnSubmitDelay,onChange:e=>X({...Q,closeOnSubmitDelay:parseInt(e.target.value)||0}),className:"w-20"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"seconds"})]})]})]}),i.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[i.jsx(S,{className:"text-base font-semibold",children:"Display & Performance"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(S,{className:"text-sm",children:"Progress Bar Position"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:["top","bottom","none"].map(e=>i.jsx(n,{type:"button",variant:Q.progress===e?"default":"outline",onClick:()=>X({...Q,progress:e}),className:"capitalize",children:e},e))})]}),"inline"===Q.mode&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"autoresize",className:"text-sm font-normal",children:["Auto-resize to Content",i.jsx("p",{className:"text-xs text-muted-foreground font-normal mt-1",children:"Automatically adjust height based on form content"})]}),i.jsx(B,{id:"autoresize",checked:Q.autoresize,onCheckedChange:e=>X({...Q,autoresize:e})})]})]})]}),i.jsxs(k,{value:"sdk",className:"space-y-6",children:[i.jsxs(u,{children:[i.jsx(ue,{className:"h-4 w-4"}),i.jsxs(x,{className:"text-sm",children:[i.jsx("strong",{children:"Important:"})," The embed code below contains an environment-specific script URL. Always copy the full code from this pageâ€”do not modify the script URL or use generic examples from other sources."]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(S,{className:"text-base font-semibold",children:"Embed Code"}),i.jsx(P,{value:Be(),readOnly:!0,rows:"inline"===Q.mode?10:9,className:"font-mono text-sm"}),i.jsxs(n,{onClick:()=>Te(Be()),className:"w-full",disabled:"published"!==c.status,children:[i.jsx(re,{className:"h-4 w-4 mr-2"}),"Copy Embed Code"]}),"published"!==c.status&&i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Publish your form to generate embed code"})]}),c?.url_params_config&&c.url_params_config.length>0&&i.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[i.jsx(S,{className:"text-base font-semibold",children:"URL Parameters"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure static values or enable transitive capture from page URL"}),i.jsx("div",{className:"space-y-3",children:c.url_params_config.map(e=>i.jsxs("div",{className:"space-y-2 p-3 border rounded-lg bg-muted/20",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(S,{className:"font-medium",children:[e.label||e.name,e.description&&i.jsx("span",{className:"block text-xs text-muted-foreground font-normal mt-0.5",children:e.description})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx(S,{className:"text-xs",children:"Static Value"}),i.jsx(C,{value:ee[e.name]?.value||"",onChange:s=>se(t=>({...t,[e.name]:{...t[e.name],value:s.target.value}})),placeholder:e.default_value||"Enter value...",disabled:ee[e.name]?.transitive})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(W,{id:`transitive-${e.name}`,checked:ee[e.name]?.transitive||!1,onCheckedChange:s=>se(t=>({...t,[e.name]:{...t[e.name],value:s?"":t[e.name]?.value||"",transitive:s}}))}),i.jsx(S,{htmlFor:`transitive-${e.name}`,className:"text-xs",children:"Read from page URL"})]})]})]},e.name))})]}),i.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(S,{className:"text-base font-semibold",children:"Choose your platform"}),i.jsxs($,{value:ie,onValueChange:ae,children:[i.jsx(T,{children:i.jsx(z,{})}),i.jsxs(F,{children:[i.jsx(E,{value:"wordpress",children:"WordPress"}),i.jsx(E,{value:"squarespace",children:"Squarespace"}),i.jsx(E,{value:"webflow",children:"Webflow"}),i.jsx(E,{value:"shopify",children:"Shopify"}),i.jsx(E,{value:"wix",children:"Wix"}),i.jsx(E,{value:"html",children:"Generic HTML"})]})]})]}),i.jsx(Ve,{platform:ie,embedCode:Be(),onCopyCode:Te})]}),i.jsxs("div",{className:"pt-4 border-t space-y-3",children:[i.jsx(S,{className:"text-base font-semibold",children:"Live Preview"}),i.jsx("iframe",{src:`/f/${e}?embed=1&mode=${Q.mode}&theme=${Q.theme}&progress=${Q.progress}`,className:"w-full border rounded-lg",style:{height:"inline"===Q.mode?"600px":"400px"}})]}),i.jsxs("div",{className:"pt-4 border-t space-y-3",children:[i.jsx(S,{className:"text-base font-semibold",children:"Debugging Tools"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Test your form in isolation to diagnose embedding issues"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs(n,{variant:"outline",onClick:()=>{const s=`${window.location.origin}/f/${e}?embed=1&mode=${Q.mode}&theme=${Q.theme}&progress=${Q.progress}`;window.open(s,"_blank")},children:[i.jsx(oe,{className:"h-4 w-4 mr-2"}),"Open iframe URL in new tab"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"If the form is interactive in this tab but not in your embedded page, the issue is likely CSS or overlays on your host page."})]})]})]})]})})]})}),"iframe"===K&&i.jsxs(i.Fragment,{children:[i.jsx(r,{className:De(Q)?"border-amber-500/50 bg-amber-50 dark:bg-amber-950/20":"border-green-500/50 bg-green-50 dark:bg-green-950/20",children:i.jsx(h,{className:"py-3",children:i.jsx("div",{className:"flex items-center gap-2",children:De(Q)?i.jsxs(i.Fragment,{children:[i.jsx(pe,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Generating Script-based Embed Code"}),i.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Advanced features enabled. Using FormsEdge embed script for full functionality."})]}),i.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{J("script"),ce({title:"Switched to Script-based mode",description:"You're now in dedicated script-based configuration"})},children:[i.jsx(ve,{className:"h-4 w-4 mr-2"}),"Switch Mode"]})]}):i.jsxs(i.Fragment,{children:[i.jsx(pe,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Generating Simple iframe Code"}),i.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:"Using basic iframe embed. Enable advanced features for more options."})]})]})})})}),i.jsxs(r,{children:[i.jsx(l,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(d,{className:"flex items-center space-x-2",children:[i.jsx(be,{className:"h-4 w-4"}),i.jsx("span",{children:"iframe Embed Configuration"})]}),i.jsxs(n,{variant:"outline",size:"sm",onClick:Re,children:[i.jsx(je,{className:"h-4 w-4 mr-2"}),"Reset"]})]})}),i.jsx(h,{children:i.jsxs(N,{defaultValue:"design",className:"space-y-6",children:[i.jsxs(y,{className:"grid w-full grid-cols-3",children:[i.jsx(w,{value:"design",children:"Design"}),i.jsx(w,{value:"advanced",children:"Advanced"}),i.jsx(w,{value:"sdk",children:"Embed SDK"})]}),i.jsxs(k,{value:"design",className:"space-y-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx(S,{className:"text-base font-semibold",children:"Embed Mode"}),i.jsx(Le,{value:Q.mode,onChange:e=>X({...Q,mode:e})})]}),("popup"===Q.mode||"slidein"===Q.mode)&&i.jsxs("div",{className:"pt-4 border-t border-border",children:[i.jsx(S,{className:"text-base font-semibold mb-4 block",children:"Trigger Button Settings"}),i.jsx(_e,{mode:Q.mode,config:{popupSize:Q.popupSize,buttonText:Q.buttonText,buttonColor:Q.buttonColor,buttonFontSize:Q.buttonFontSize,buttonBorderRadius:Q.buttonBorderRadius,buttonAsText:Q.buttonAsText,slideDirection:Q.slideDirection,tabText:Q.tabText,buttonIcon:Q.buttonIcon,iconSize:Q.iconSize,tooltipText:Q.tooltipText},onChange:e=>X({...Q,...e})})]}),"inline"===Q.mode&&i.jsx(Pe,{width:Q.width,height:Q.height,onWidthChange:e=>X({...Q,width:e}),onHeightChange:e=>X({...Q,height:e})}),i.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[i.jsx(S,{className:"text-base font-semibold",children:"Display Options"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"mobile-fullscreen",className:"text-sm",children:["Mobile Full-screen",i.jsx("p",{className:"text-xs text-muted-foreground font-normal mt-1",children:"Auto-expand to full screen on mobile devices"})]}),i.jsx(B,{id:"mobile-fullscreen",checked:Q.mobileFullscreen,onCheckedChange:e=>X({...Q,mobileFullscreen:e})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{htmlFor:"hide-title",className:"text-sm",children:"Hide Form Title"}),i.jsx(B,{id:"hide-title",checked:Q.hideTitle,onCheckedChange:e=>X({...Q,hideTitle:e})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{htmlFor:"hide-desc",className:"text-sm",children:"Hide Form Description"}),i.jsx(B,{id:"hide-desc",checked:Q.hideDescription,onCheckedChange:e=>X({...Q,hideDescription:e})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(S,{className:"text-sm",children:["Background Opacity: ",Q.backgroundOpacity,"%"]}),i.jsx(R,{value:[Q.backgroundOpacity],onValueChange:e=>X({...Q,backgroundOpacity:e[0]}),min:0,max:100,step:5})]})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsx(Ie,{value:Q.theme,onChange:e=>X({...Q,theme:e})})})]}),i.jsxs(k,{value:"advanced",className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{className:"text-base font-semibold",children:"Behaviour"}),"inline"===Q.mode&&i.jsx(L,{variant:"outline",className:"text-xs",children:"Some features only apply to overlay modes"})]}),"inline"===Q.mode&&i.jsx(r,{className:"border-amber-500/50 bg-amber-50 dark:bg-amber-950/20",children:i.jsx(h,{className:"py-4",children:i.jsx("div",{className:"flex items-start gap-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100 mb-1",children:"Want to use custom triggers and launch controls?"}),i.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 mb-3",children:"Switch to an overlay mode (popup, slide-in, etc.) to enable advanced behaviour options."}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{X({...Q,mode:"popup"}),ce({title:"Switched to Popup mode",description:"Advanced behaviour options are now available"})},className:"h-8",children:[i.jsx(Se,{className:"h-3 w-3 mr-1"}),"Popup"]}),i.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{X({...Q,mode:"slidein"}),ce({title:"Switched to Slider mode",description:"Advanced behaviour options are now available"})},className:"h-8",children:[i.jsx($e,{className:"h-3 w-3 mr-1"}),"Slider"]})]})]})})})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"custom-launch-iframe",className:"text-sm font-normal",children:["Custom launch options","inline"===Q.mode&&i.jsx("span",{className:"block text-xs text-muted-foreground font-normal mt-1",children:"Available in overlay modes (popup, slide-in, etc.)"})]}),i.jsx(B,{id:"custom-launch-iframe",checked:Q.customLaunchEnabled,onCheckedChange:e=>X({...Q,customLaunchEnabled:e,trigger:e?Q.trigger:"immediate"}),disabled:"inline"===Q.mode})]}),Q.customLaunchEnabled&&i.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-primary/20",children:[i.jsx(S,{className:"text-sm",children:"Launch trigger"}),i.jsxs($,{value:Q.trigger,onValueChange:e=>X({...Q,trigger:e,triggerValue:"scroll"===e?"60":"time"===e?"5":""}),children:[i.jsx(T,{children:i.jsx(z,{})}),i.jsxs(F,{children:[i.jsx(E,{value:"immediate",children:"On page load"}),i.jsx(E,{value:"exit",children:"On exit intent"}),i.jsx(E,{value:"scroll",children:"After scrolling"}),i.jsx(E,{value:"time",children:"After a set time"})]})]}),"scroll"===Q.trigger&&i.jsxs($,{value:Q.scrollPercentage,onValueChange:e=>X({...Q,scrollPercentage:e,triggerValue:e}),children:[i.jsx(T,{children:i.jsx(z,{})}),i.jsxs(F,{children:[i.jsx(E,{value:"30",children:"30% of page"}),i.jsx(E,{value:"60",children:"60% of page"}),i.jsx(E,{value:"90",children:"90% of page"})]})]}),"time"===Q.trigger&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(C,{type:"number",min:"1",max:"60",value:Q.triggerValue,onChange:e=>X({...Q,triggerValue:e.target.value}),placeholder:"5",className:"flex-1"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"seconds"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"show-button-iframe",className:"text-sm font-normal",children:["Show launch button","inline"===Q.mode&&i.jsx("span",{className:"block text-xs text-muted-foreground font-normal mt-1",children:"Not applicable in inline mode"})]}),i.jsx(B,{id:"show-button-iframe",checked:Q.showLaunchButton,onCheckedChange:e=>X({...Q,showLaunchButton:e}),disabled:"inline"===Q.mode})]}),Q.customLaunchEnabled&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"prevent-reopen-iframe",className:"text-sm font-normal",children:["Prevent re-open on close",i.jsx("span",{className:"block text-xs text-muted-foreground font-normal mt-1",children:"Form won't reappear after user closes it"})]}),i.jsx(B,{id:"prevent-reopen-iframe",checked:Q.preventReopen,onCheckedChange:e=>X({...Q,preventReopen:e})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"close-submit",className:"text-sm font-normal",children:["Close on submit","inline"===Q.mode&&i.jsx("span",{className:"block text-xs text-muted-foreground font-normal mt-1",children:"Not applicable in inline mode"})]}),i.jsx(B,{id:"close-submit",checked:Q.closeOnSubmit,onCheckedChange:e=>X({...Q,closeOnSubmit:e}),disabled:"inline"===Q.mode})]}),Q.closeOnSubmit&&i.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[i.jsx(S,{className:"text-sm text-muted-foreground",children:"Delay for"}),i.jsx(C,{type:"number",min:"0",max:"30",value:Q.closeOnSubmitDelay,onChange:e=>X({...Q,closeOnSubmitDelay:parseInt(e.target.value)||0}),className:"w-20"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"seconds"})]})]})]}),i.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[i.jsx(S,{className:"text-base font-semibold",children:"Display & Performance"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(S,{className:"text-sm",children:"Progress Bar Position"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:["top","bottom","none"].map(e=>i.jsx(n,{type:"button",variant:Q.progress===e?"default":"outline",onClick:()=>X({...Q,progress:e}),className:"capitalize",children:e},e))})]}),"inline"===Q.mode&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(S,{htmlFor:"autoresize",className:"text-sm font-normal",children:["Auto-resize to Content",i.jsx("p",{className:"text-xs text-muted-foreground font-normal mt-1",children:"Automatically adjust height based on form content"})]}),i.jsx(B,{id:"autoresize",checked:Q.autoresize,onCheckedChange:e=>X({...Q,autoresize:e})})]})]})]}),i.jsxs(k,{value:"sdk",className:"space-y-6",children:[i.jsxs(u,{children:[i.jsx(ue,{className:"h-4 w-4"}),i.jsxs(x,{className:"text-sm",children:[i.jsx("strong",{children:"Important:"})," The embed code below contains an environment-specific script URL. Always copy the full code from this pageâ€”do not modify the script URL or use generic examples from other sources."]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{className:"text-base font-semibold",children:"Embed Code"}),i.jsx(L,{variant:"script"===Oe?"default":"secondary",children:"script"===Oe?"Script-based":"Simple iframe"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(P,{value:"script"===Oe?Be():`<iframe \n  src="${window.location.origin}/f/${c.id}?embed=1${"light"!==Q.theme?`&theme=${Q.theme}`:""}${Q.hideTitle?"&hideTitle=true":""}${Q.hideDescription?"&hideDescription=true":""}" \n  width="${Q.width}" \n  height="${Q.height}"\n  frameborder="0"\n  style="border: none; border-radius: 8px;">\n</iframe>`,readOnly:!0,rows:"script"===Oe?"inline"===Q.mode?10:9:7,className:"font-mono text-sm"}),i.jsxs(n,{onClick:()=>Te("script"===Oe?Be():`<iframe \n  src="${window.location.origin}/f/${c.id}?embed=1${"light"!==Q.theme?`&theme=${Q.theme}`:""}${Q.hideTitle?"&hideTitle=true":""}${Q.hideDescription?"&hideDescription=true":""}" \n  width="${Q.width}" \n  height="${Q.height}"\n  frameborder="0"\n  style="border: none; border-radius: 8px;">\n</iframe>`),className:"w-full",disabled:"published"!==c.status,children:[i.jsx(re,{className:"h-4 w-4 mr-2"}),"Copy Embed Code"]}),"published"!==c.status&&i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Publish your form to generate embed code"})]}),c?.url_params_config&&c.url_params_config.length>0&&"script"===Oe&&i.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[i.jsx(S,{className:"text-base font-semibold",children:"URL Parameters"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure static values or enable transitive capture from page URL"}),i.jsx("div",{className:"space-y-3",children:c.url_params_config.map(e=>i.jsxs("div",{className:"space-y-2 p-3 border rounded-lg bg-muted/20",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(S,{className:"font-medium",children:[e.label||e.name,e.description&&i.jsx("span",{className:"block text-xs text-muted-foreground font-normal mt-0.5",children:e.description})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx(S,{className:"text-xs",children:"Static Value"}),i.jsx(C,{value:ee[e.name]?.value||"",onChange:s=>se(t=>({...t,[e.name]:{...t[e.name],value:s.target.value}})),placeholder:e.default_value||"Enter value...",disabled:ee[e.name]?.transitive})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(W,{id:`transitive-${e.name}`,checked:ee[e.name]?.transitive||!1,onCheckedChange:s=>se(t=>({...t,[e.name]:{...t[e.name],value:s?"":t[e.name]?.value||"",transitive:s}}))}),i.jsx(S,{htmlFor:`transitive-${e.name}`,className:"text-xs",children:"Read from page URL"})]})]})]},e.name))})]}),i.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(S,{className:"text-base font-semibold",children:"Choose your platform"}),i.jsxs($,{value:ie,onValueChange:ae,children:[i.jsx(T,{children:i.jsx(z,{})}),i.jsxs(F,{children:[i.jsx(E,{value:"wordpress",children:"WordPress"}),i.jsx(E,{value:"squarespace",children:"Squarespace"}),i.jsx(E,{value:"webflow",children:"Webflow"}),i.jsx(E,{value:"shopify",children:"Shopify"}),i.jsx(E,{value:"wix",children:"Wix"}),i.jsx(E,{value:"html",children:"Generic HTML"})]})]})]}),i.jsx(Ve,{platform:ie,embedCode:"script"===Oe?Be():`<iframe \n  src="${window.location.origin}/f/${c.id}?embed=1${"light"!==Q.theme?`&theme=${Q.theme}`:""}${Q.hideTitle?"&hideTitle=true":""}${Q.hideDescription?"&hideDescription=true":""}" \n  width="${Q.width}" \n  height="${Q.height}"\n  frameborder="0"\n  style="border: none; border-radius: 8px;">\n</iframe>`,onCopyCode:Te})]}),i.jsxs("div",{className:"pt-4 border-t space-y-3",children:[i.jsx(S,{className:"text-base font-semibold",children:"Live Preview"}),i.jsx("iframe",{src:`/f/${e}?embed=1&mode=${Q.mode}&theme=${Q.theme}&progress=${Q.progress}`,className:"w-full border rounded-lg",style:{height:"inline"===Q.mode?"600px":"400px"}})]})]})]})})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(r,{children:[i.jsx(l,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(d,{className:"flex items-center space-x-2",children:[i.jsx(he,{className:"h-4 w-4"}),i.jsx("span",{children:"Preview"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(n,{variant:"desktop"===G?"default":"outline",size:"sm",onClick:()=>Y("desktop"),children:i.jsx(Z,{className:"h-4 w-4"})}),i.jsx(n,{variant:"tablet"===G?"default":"outline",size:"sm",onClick:()=>Y("tablet"),children:i.jsx(me,{className:"h-4 w-4"})}),i.jsx(n,{variant:"mobile"===G?"default":"outline",size:"sm",onClick:()=>Y("mobile"),children:i.jsx(Ne,{className:"h-4 w-4"})})]})]})}),i.jsx(h,{className:"embed-preview-container",children:i.jsx(Fe,{formId:c.id,config:U,device:G,disabled:"published"!==c.status})})]}),de&&i.jsx(He,{targetSelector:".embed-preview-container"}),i.jsxs(r,{children:[i.jsx(l,{children:i.jsx(d,{children:"Embed Performance"})}),i.jsx(h,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold",children:"0"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Embed Views"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold",children:"0"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Conversions"})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Analytics will appear after your form is embedded and receives traffic"})]})})]})]})]})]})]})};export{Ue as default};
