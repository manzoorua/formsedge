import{j as e}from"./main-BQOa5mM0.js";import{H as s,F as r}from"./Footer-DKRYfoL3.js";import{D as n,a as t,b as o}from"./DocsFeedback-CISRDegq.js";import"./badge-6grXs2Vt.js";import"./ThemeToggle-B4EQrceX.js";import"./sun-oLtT9Ef9.js";import"./RewardsPopup-VqGcFfEV.js";import"./dialog-Zbmvpzx0.js";import"./index-D4HqgO5_.js";import"./index-CjuUx4b5.js";import"./gift-mKnn5hCx.js";import"./check-WoqjMYuF.js";import"./copy-BZksGIXa.js";import"./share-2-CwU1PQxU.js";import"./arrow-left-BoD24ioV.js";import"./dollar-sign-CFY7m5M8.js";import"./clock-BGkZXTj0.js";import"./calendar-BcqkHMaS.js";import"./format-CNqjFxb7.js";import"./en-US-DcoqlHup.js";import"./circle-check-big-BImW7D2D.js";import"./dropdown-menu-DSV87Z6r.js";import"./index-C38VFtOl.js";import"./index-_nftuPOU.js";import"./circle-BfUTHkiN.js";import"./chevron-down-BwC0H5jo.js";import"./zap-Ewtv7hwb.js";import"./chart-column-DIuSFmYM.js";import"./rocket-fpVNsyTC.js";import"./file-text-WxvKYvjS.js";import"./settings-CSYLqhyU.js";import"./circle-alert-C_kZuZo4.js";const a=()=>e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(s,{}),e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid lg:grid-cols-[250px,1fr] gap-12",children:[e.jsx(n,{}),e.jsxs("div",{children:[e.jsx(t,{items:[{label:"Docs",href:"/docs"},{label:"API Documentation",href:"/docs/api"}]}),e.jsxs("article",{className:"prose prose-lg max-w-none",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"FormsEdge API Documentation"}),e.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Programmatic access to your form responses with RESTful APIs and webhooks."}),e.jsx("h2",{className:"text-2xl font-bold mt-12 mb-4",children:"Authentication"}),e.jsx("p",{className:"mb-4",children:"All API requests require authentication using JWT tokens. Include your token in the Authorization header:"}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-6",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:"Authorization: Bearer YOUR_JWT_TOKEN"})}),e.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Getting Your Token"}),e.jsx("p",{className:"mb-4",children:"Your API token is your Supabase JWT from your current session. To obtain it:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 mb-6",children:[e.jsx("li",{children:"Log in to FormsEdge"}),e.jsx("li",{children:"Open browser developer console (F12)"}),e.jsxs("li",{children:["In the console, run: ",e.jsx("code",{className:"bg-muted px-2 py-1 rounded text-sm",children:"localStorage.getItem('sb-upzbauplibbnmmsvlsjf-auth-token')"})]}),e.jsx("li",{children:"Copy the access_token value from the JSON response"})]}),e.jsx("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Note:"})," Session tokens expire after 1 hour by default. For production use, implement proper token refresh logic. Keep your API token secure and never expose it in client-side code or public repositories."]})}),e.jsx("h2",{className:"text-2xl font-bold mt-12 mb-4",children:"Responses API"}),e.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"List Responses"}),e.jsx("p",{className:"mb-4",children:"Retrieve all responses for a specific form with pagination and filtering."}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-4",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:"GET /form-responses?form_id={form_id}"})}),e.jsx("h4",{className:"font-bold mt-6 mb-3",children:"Query Parameters"}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("th",{className:"text-left py-2 pr-4",children:"Parameter"}),e.jsx("th",{className:"text-left py-2 pr-4",children:"Type"}),e.jsx("th",{className:"text-left py-2",children:"Description"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"form_id"}),e.jsx("td",{className:"py-2 pr-4",children:"string"}),e.jsx("td",{className:"py-2",children:"Required. The form ID"})]}),e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"status"}),e.jsx("td",{className:"py-2 pr-4",children:"string"}),e.jsx("td",{className:"py-2",children:"complete | partial | all (default: complete)"})]}),e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"page_size"}),e.jsx("td",{className:"py-2 pr-4",children:"number"}),e.jsx("td",{className:"py-2",children:"1-200 (default: 50)"})]}),e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"cursor"}),e.jsx("td",{className:"py-2 pr-4",children:"string"}),e.jsx("td",{className:"py-2",children:"Pagination cursor from previous response"})]}),e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"since"}),e.jsx("td",{className:"py-2 pr-4",children:"string"}),e.jsx("td",{className:"py-2",children:"ISO 8601 timestamp (filter responses after)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"until"}),e.jsx("td",{className:"py-2 pr-4",children:"string"}),e.jsx("td",{className:"py-2",children:"ISO 8601 timestamp (filter responses before)"})]})]})]})}),e.jsx("h4",{className:"font-bold mt-6 mb-3",children:"Example Request"}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-4",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:"curl -X GET 'https://upzbauplibbnmmsvlsjf.supabase.co/functions/v1/form-responses?form_id=abc123&status=complete&page_size=50' \\\n  -H 'Authorization: Bearer YOUR_JWT_TOKEN'"})}),e.jsx("h4",{className:"font-bold mt-6 mb-3",children:"Example Response"}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-6",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:'{\n  "items": [\n    {\n      "id": "resp_123",\n      "form_id": "abc123",\n      "form_title": "Contact Form",\n      "status": "complete",\n      "respondent_id": "user_456",\n      "respondent_email": "john@example.com",\n      "created_at": "2024-11-21T10:30:00Z",\n      "submitted_at": "2024-11-21T10:32:15Z",\n      "url_params": {\n        "utm_source": "google",\n        "utm_campaign": "spring2024"\n      },\n      "metadata": {\n        "completion_time_seconds": 135,\n        "completion_time_label": "2 minutes"\n      },\n      "answers": [\n        {\n          "field": {\n            "id": "field_1",\n            "label": "Full Name",\n            "type": "text"\n          },\n          "type": "text",\n          "value": "John Doe"\n        },\n        {\n          "field": {\n            "id": "field_2",\n            "label": "Email Address",\n            "type": "email"\n          },\n          "type": "email",\n          "value": "john@example.com"\n        }\n      ]\n    }\n  ],\n  "total_count": 142,\n  "page_size": 50,\n  "next_cursor": "eyJzdWJtaXR0ZWRfYXQiOiIyMDI0LTExLTIxVDEwOjMyOjE1WiIsImlkIjoicmVzcF8xMjMifQ==",\n  "has_more": true\n}'})}),e.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Get Single Response"}),e.jsx("p",{className:"mb-4",children:"Retrieve a specific response by ID."}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-4",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:"GET /form-responses/{response_id}"})}),e.jsx("h4",{className:"font-bold mt-6 mb-3",children:"Example Request"}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-4",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:"curl -X GET 'https://upzbauplibbnmmsvlsjf.supabase.co/functions/v1/form-responses/resp_123' \\\n  -H 'Authorization: Bearer YOUR_JWT_TOKEN'"})}),e.jsx("h4",{className:"font-bold mt-6 mb-3",children:"Example Response"}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-6",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:'{\n  "item": {\n    "id": "resp_123",\n    "form_id": "abc123",\n    "form_title": "Contact Form",\n    "status": "complete",\n    "respondent_email": "john@example.com",\n    "submitted_at": "2024-11-21T10:32:15Z",\n    "answers": [...]\n  }\n}'})}),e.jsx("h2",{className:"text-2xl font-bold mt-12 mb-4",children:"Webhooks"}),e.jsx("p",{className:"mb-4",children:"Webhooks automatically send form submission data to your server in real-time."}),e.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Webhook Payload"}),e.jsx("p",{className:"mb-4",children:"When a form is submitted, FormsEdge sends a POST request to your webhook URL:"}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-6",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:'{\n  "event_id": "evt_789",\n  "event_type": "form_response",\n  "created_at": "2024-11-21T10:32:15Z",\n  "form_response": {\n    "id": "resp_123",\n    "form_id": "abc123",\n    "form_title": "Contact Form",\n    "status": "complete",\n    "respondent_email": "john@example.com",\n    "submitted_at": "2024-11-21T10:32:15Z",\n    "url_params": {\n      "utm_source": "google"\n    },\n    "answers": [\n      {\n        "field": {\n          "id": "field_1",\n          "label": "Full Name",\n          "type": "text"\n        },\n        "type": "text",\n        "value": "John Doe"\n      }\n    ]\n  }\n}'})}),e.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Webhook Security"}),e.jsx("p",{className:"mb-4",children:"FormsEdge signs webhook payloads using HMAC-SHA256 to verify authenticity."}),e.jsx("h4",{className:"font-bold mt-6 mb-3",children:"Signature Header"}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-4",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:"X-FormsEdge-Signature: sha256=abc123def456..."})}),e.jsx("h4",{className:"font-bold mt-6 mb-3",children:"Verifying Signatures (Node.js)"}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-4",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:"const crypto = require('crypto');\n\nfunction verifySignature(payload, signature, secret) {\n  const expectedSignature = 'sha256=' + \n    crypto.createHmac('sha256', secret)\n      .update(payload)\n      .digest('hex');\n  \n  return crypto.timingSafeEqual(\n    Buffer.from(signature),\n    Buffer.from(expectedSignature)\n  );\n}\n\n// In your webhook endpoint:\napp.post('/webhook', (req, res) => {\n  const signature = req.headers['x-formsedge-signature'];\n  const payload = JSON.stringify(req.body);\n  const secret = process.env.WEBHOOK_SECRET;\n  \n  if (!verifySignature(payload, signature, secret)) {\n    return res.status(401).send('Invalid signature');\n  }\n  \n  // Process the webhook\n  console.log('Valid webhook received:', req.body);\n  res.status(200).send('OK');\n});"})}),e.jsx("h4",{className:"font-bold mt-6 mb-3",children:"Verifying Signatures (Python)"}),e.jsx("div",{className:"bg-muted rounded-lg p-4 mb-6",children:e.jsx("pre",{className:"text-sm font-mono overflow-x-auto",children:"import hmac\nimport hashlib\n\ndef verify_signature(payload: str, signature: str, secret: str) -> bool:\n    expected_signature = 'sha256=' + hmac.new(\n        secret.encode('utf-8'),\n        payload.encode('utf-8'),\n        hashlib.sha256\n    ).hexdigest()\n    \n    return hmac.compare_digest(signature, expected_signature)\n\n# In your webhook endpoint:\n@app.route('/webhook', methods=['POST'])\ndef webhook():\n    signature = request.headers.get('X-FormsEdge-Signature')\n    payload = request.get_data(as_text=True)\n    secret = os.environ.get('WEBHOOK_SECRET')\n    \n    if not verify_signature(payload, signature, secret):\n        return 'Invalid signature', 401\n    \n    # Process the webhook\n    data = request.json\n    print(f\"Valid webhook received: {data}\")\n    return 'OK', 200"})}),e.jsx("h2",{className:"text-2xl font-bold mt-12 mb-4",children:"Error Codes"}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("th",{className:"text-left py-2 pr-4",children:"Code"}),e.jsx("th",{className:"text-left py-2 pr-4",children:"Status"}),e.jsx("th",{className:"text-left py-2",children:"Description"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"unauthorized"}),e.jsx("td",{className:"py-2 pr-4",children:"401"}),e.jsx("td",{className:"py-2",children:"Missing or invalid authentication"})]}),e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"forbidden"}),e.jsx("td",{className:"py-2 pr-4",children:"403"}),e.jsx("td",{className:"py-2",children:"Access denied to the resource"})]}),e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"not_found"}),e.jsx("td",{className:"py-2 pr-4",children:"404"}),e.jsx("td",{className:"py-2",children:"Resource not found"})]}),e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"bad_request"}),e.jsx("td",{className:"py-2 pr-4",children:"400"}),e.jsx("td",{className:"py-2",children:"Invalid request parameters"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pr-4 font-mono",children:"internal_error"}),e.jsx("td",{className:"py-2 pr-4",children:"500"}),e.jsx("td",{className:"py-2",children:"Server error"})]})]})]})}),e.jsx("h2",{className:"text-2xl font-bold mt-12 mb-4",children:"Rate Limits"}),e.jsxs("ul",{className:"space-y-2 mb-8",children:[e.jsx("li",{children:"API requests: 100 per minute per user"}),e.jsx("li",{children:"Webhook deliveries: 1000 per hour per form"}),e.jsx("li",{children:"Retry limit: 5 attempts with exponential backoff"})]}),e.jsx("h2",{className:"text-2xl font-bold mt-12 mb-4",children:"Best Practices"}),e.jsxs("ul",{className:"space-y-2 mb-8",children:[e.jsx("li",{children:"Always verify webhook signatures to ensure authenticity"}),e.jsx("li",{children:"Use HTTPS URLs for webhook endpoints"}),e.jsx("li",{children:"Implement idempotency using the event_id to handle duplicates"}),e.jsx("li",{children:"Respond to webhooks quickly (within 5 seconds) to avoid timeouts"}),e.jsx("li",{children:"Store API tokens securely and never commit them to version control"}),e.jsx("li",{children:"Use pagination cursors for large response datasets"})]})]}),e.jsx(o,{})]})]})})}),e.jsx(r,{})]});export{a as default};
