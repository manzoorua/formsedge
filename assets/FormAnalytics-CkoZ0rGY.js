import{R as e,_ as t,r as s,j as r,C as a,b as n,d as i,f as o,Z as l,u as c,k as d,s as m,N as u,B as h,L as x}from"./main-BQOa5mM0.js";import{T as f,a as p,b as j,c as v}from"./tabs-BbGbqsLR.js";import{B as y}from"./badge-6grXs2Vt.js";import{i as g,D as b,f as w,E as N,L as A,a as S,C as O,A as k,b as D,c as P,d as C,h as E,e as T,g as _,u as R,G as F,j as L,k as V,X as I,Y as B,l as M,R as K,m as U,n as W,T as z,o as q,p as $}from"./AreaChart-gdTbffDC.js";import{S as G,a as X,b as Y,c as Z,d as H}from"./select-DDetsmr9.js";import{T as J}from"./ThemeToggle-B4EQrceX.js";import{A as Q}from"./arrow-left-BoD24ioV.js";import{U as ee}from"./users-DfZDw2qr.js";import{E as te}from"./eye-Bq8mO4No.js";import{A as se}from"./activity-bwg40EGM.js";import{T as re}from"./trending-up-C7EF6GbL.js";import{C as ae}from"./chart-column-DIuSFmYM.js";import{C as ne}from"./clock-BGkZXTj0.js";import"./index-_nftuPOU.js";import"./index-C38VFtOl.js";import"./index-CjuUx4b5.js";import"./index-Cff7j1dh.js";import"./chevron-down-BwC0H5jo.js";import"./check-WoqjMYuF.js";import"./sun-oLtT9Ef9.js";var ie=["type","layout","connectNulls","ref"],oe=["key"];function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},de.apply(this,arguments)}function me(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function ue(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?me(Object(s),!0).forEach(function(t){ge(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):me(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function he(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return xe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function fe(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,be(r.key),r)}}function pe(e,t,s){return t=ve(t),function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,je()?Reflect.construct(t,s||[],ve(e).constructor):t.apply(e,s))}function je(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(je=function(){return!!e})()}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t,s){return(t=be(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function be(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t);if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==le(t)?t:t+""}var we=function(){function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return ge(e=pe(this,r,[].concat(s)),"state",{isAnimationFinished:!0,totalLength:0}),ge(e,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),ge(e,"getStrokeDasharray",function(t,s,a){var n=a.reduce(function(e,t){return e+t});if(!n)return e.generateSimpleStrokeDasharray(s,t);for(var i=Math.floor(t/n),o=t%n,l=s-t,c=[],d=0,m=0;d<a.length;m+=a[d],++d)if(m+a[d]>o){c=[].concat(he(a.slice(0,d)),[o-m]);break}var u=c.length%2==0?[0,l]:[l];return[].concat(he(r.repeat(a,i)),he(c),u).map(function(e){return"".concat(e,"px")}).join(", ")}),ge(e,"id",R("recharts-line-")),ge(e,"pathRef",function(t){e.mainCurve=t}),ge(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),ge(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}(r,s.PureComponent),a=r,i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var s=e.length%2!=0?[].concat(he(e),[0]):e,r=[],a=0;a<t;++a)r=[].concat(he(r),he(s));return r}},{key:"renderDotItem",value:function(s,r){var a;if(e.isValidElement(s))a=e.cloneElement(s,r);else if(g(s))a=s(r);else{var n=r.key,i=ce(r,oe),o=t("recharts-line-dot","boolean"!=typeof s?s.className:"");a=e.createElement(b,de({key:n},i,{className:o}))}return a}}],(n=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(t,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,a=r.points,n=r.xAxis,i=r.yAxis,o=r.layout,l=r.children,c=w(l,N);if(!c)return null;var d=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:_(e.payload,t)}},m={clipPath:t?"url(#clipPath-".concat(s,")"):null};return e.createElement(A,m,c.map(function(t){return e.cloneElement(t,{key:"bar-".concat(t.props.dataKey),data:a,xAxis:n,yAxis:i,layout:o,dataPointFormatter:d})}))}},{key:"renderDots",value:function(t,s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,i=n.dot,o=n.points,l=n.dataKey,c=S(this.props,!1),d=S(i,!0),m=o.map(function(e,t){var s=ue(ue(ue({key:"dot-".concat(t),r:3},c),d),{},{index:t,cx:e.x,cy:e.y,value:e.value,dataKey:l,payload:e.payload,points:o});return r.renderDotItem(i,s)}),u={clipPath:t?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return e.createElement(A,de({className:"recharts-line-dots",key:"dots"},u),m)}},{key:"renderCurveStatically",value:function(t,s,r,a){var n=this.props,i=n.type,o=n.layout,l=n.connectNulls;n.ref;var c=ce(n,ie),d=ue(ue(ue({},S(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(r,")"):null,points:t},a),{},{type:i,layout:o,connectNulls:l});return e.createElement(O,de({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(t,s){var r=this,a=this.props,n=a.points,i=a.strokeDasharray,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,m=a.animationId,u=a.animateNewValues,h=a.width,x=a.height,f=this.state,p=f.prevPoints,j=f.totalLength;return e.createElement(k,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(e){var a=e.t;if(p){var o=p.length/n.length,l=n.map(function(e,t){var s=Math.floor(t*o);if(p[s]){var r=p[s],n=D(r.x,e.x),i=D(r.y,e.y);return ue(ue({},e),{},{x:n(a),y:i(a)})}if(u){var l=D(2*h,e.x),c=D(x/2,e.y);return ue(ue({},e),{},{x:l(a),y:c(a)})}return ue(ue({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(l,t,s)}var c,d=D(0,j)(a);if(i){var m="".concat(i).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=r.getStrokeDasharray(d,j,m)}else c=r.generateSimpleStrokeDasharray(j,d);return r.renderCurveStatically(n,t,s,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var s=this.props,r=s.points,a=s.isAnimationActive,n=this.state,i=n.prevPoints,o=n.totalLength;return a&&r&&r.length&&(!i&&o>0||!P(i,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var s,r=this.props,a=r.hide,n=r.dot,i=r.points,o=r.className,l=r.xAxis,c=r.yAxis,d=r.top,m=r.left,u=r.width,h=r.height,x=r.isAnimationActive,f=r.id;if(a||!i||!i.length)return null;var p=this.state.isAnimationFinished,j=1===i.length,v=t("recharts-line",o),y=l&&l.allowDataOverflow,g=c&&c.allowDataOverflow,b=y||g,w=C(f)?this.id:f,N=null!==(s=S(n,!1))&&void 0!==s?s:{r:3,strokeWidth:2},O=N.r,k=void 0===O?3:O,D=N.strokeWidth,P=void 0===D?2:D,_=(E(n)?n:{}).clipDot,R=void 0===_||_,F=2*k+P;return e.createElement(A,{className:v},y||g?e.createElement("defs",null,e.createElement("clipPath",{id:"clipPath-".concat(w)},e.createElement("rect",{x:y?m:m-u/2,y:g?d:d-h/2,width:y?u:2*u,height:g?h:2*h})),!R&&e.createElement("clipPath",{id:"clipPath-dots-".concat(w)},e.createElement("rect",{x:m-F/2,y:d-F/2,width:u+F,height:h+F}))):null,!j&&this.renderCurve(b,w),this.renderErrorBar(b,w),(j||n)&&this.renderDots(b,R,w),(!x||p)&&T.renderCallByParent(this.props,i))}}])&&fe(a.prototype,n),i&&fe(a,i),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,n,i}();ge(we,"displayName","Line"),ge(we,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!F.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),ge(we,"getComposedData",function(e){var t=e.props,s=e.xAxis,r=e.yAxis,a=e.xAxisTicks,n=e.yAxisTicks,i=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout;return ue({points:l.map(function(e,t){var l=_(e,i);return"horizontal"===d?{x:L({axis:s,ticks:a,bandSize:o,entry:e,index:t}),y:C(l)?null:r.scale(l),value:l,payload:e}:{x:C(l)?null:s.scale(l),y:L({axis:r,ticks:n,bandSize:o,entry:e,index:t}),value:l,payload:e}}),layout:d},c)});var Ne=V({chartName:"LineChart",GraphicalChild:we,axisComponents:[{axisType:"xAxis",AxisComp:I},{axisType:"yAxis",AxisComp:B}],formatAxisMap:M});const Ae=({responsesByDate:e,conversionRate:t,timeRange:s})=>r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(a,{children:[r.jsx(n,{children:r.jsx(i,{children:"Responses Over Time"})}),r.jsx(o,{children:r.jsx(K,{width:"100%",height:300,children:r.jsxs(U,{data:e,children:[r.jsx(W,{strokeDasharray:"3 3"}),r.jsx(I,{dataKey:"date"}),r.jsx(B,{}),r.jsx(z,{}),r.jsx(q,{}),r.jsx($,{type:"monotone",dataKey:"responses",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3})]})})})]}),r.jsxs(a,{children:[r.jsx(n,{children:r.jsx(i,{children:"Views vs Responses"})}),r.jsx(o,{children:r.jsx(K,{width:"100%",height:300,children:r.jsxs(Ne,{data:e,children:[r.jsx(W,{strokeDasharray:"3 3"}),r.jsx(I,{dataKey:"date"}),r.jsx(B,{}),r.jsx(z,{}),r.jsx(q,{}),r.jsx(we,{type:"monotone",dataKey:"views",stroke:"hsl(var(--accent))",strokeWidth:2}),r.jsx(we,{type:"monotone",dataKey:"responses",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]})]}),Se=({formId:e})=>r.jsxs(a,{children:[r.jsx(n,{children:r.jsx(i,{children:"Field-Level Analytics"})}),r.jsx(o,{children:r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Field analytics will be available once sufficient data is collected"})})]}),Oe=({value:e,onChange:t})=>r.jsxs(G,{value:e,onValueChange:t,children:[r.jsx(X,{className:"w-40",children:r.jsx(Y,{})}),r.jsxs(Z,{children:[r.jsx(H,{value:"7d",children:"Last 7 days"}),r.jsx(H,{value:"30d",children:"Last 30 days"}),r.jsx(H,{value:"90d",children:"Last 90 days"})]})]}),ke=()=>{const{id:e}=l(),{user:t,loading:g}=c(),[b,w]=s.useState(null),[N,A]=s.useState(null),[S,O]=s.useState(!0),[k,D]=s.useState("7d"),{toast:P}=d();s.useEffect(()=>{t&&e&&C()},[t,e,k]);const C=async()=>{try{const{data:s,error:r}=await m.from("forms").select("id, title, description, created_at, owner_id").eq("id",e).single();if(r)throw r;const{data:a}=await m.rpc("can_access_form",{form_id:e,user_id:t?.id});if(!a)return void P({title:"Access denied",description:"You don't have permission to view this form's analytics",variant:"destructive"});w(s);const n=new Date,i=new Date,o="7d"===k?7:"30d"===k?30:90;i.setDate(n.getDate()-o);const{data:l,error:c}=await m.from("form_analytics").select("*").eq("form_id",e).gte("date",i.toISOString().split("T")[0]).lte("date",n.toISOString().split("T")[0]).order("date",{ascending:!0});if(c)throw c;const{data:d}=await m.from("form_responses").select("created_at, submitted_at, is_partial").eq("form_id",e).gte("created_at",i.toISOString()).lte("created_at",n.toISOString()),u=l?.reduce((e,t)=>e+(t.views||0),0)||0,h=l?.reduce((e,t)=>e+(t.starts||0),0)||0,x=l?.reduce((e,t)=>e+(t.completions||0),0)||0,f=h>0?x/h*100:0,p=h>0?(h-x)/h*100:0,j=d?.filter(e=>!e.is_partial&&e.submitted_at)||[],v=j.length>0?j.reduce((e,t)=>{const s=new Date(t.created_at).getTime();return e+(new Date(t.submitted_at).getTime()-s)},0)/j.length/1e3/60:0,y=l?.map(e=>({date:e.date,responses:e.completions||0,views:e.views||0}))||[],g=[{device:"Desktop",count:Math.floor(.6*u)},{device:"Mobile",count:Math.floor(.35*u)},{device:"Tablet",count:Math.floor(.05*u)}],b=[{country:"United States",count:Math.floor(.4*u)},{country:"United Kingdom",count:Math.floor(.2*u)},{country:"Canada",count:Math.floor(.15*u)},{country:"Australia",count:Math.floor(.1*u)},{country:"Others",count:Math.floor(.15*u)}];A({totalViews:u,totalStarts:h,totalCompletions:x,conversionRate:f,avgCompletionTime:v,dropOffRate:p,responsesByDate:y,deviceBreakdown:g,locationData:b})}catch(s){P({title:"Error loading analytics",description:s.message,variant:"destructive"})}finally{O(!1)}};return g||S?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-subtle",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-muted rounded w-48"}),r.jsx("div",{className:"h-4 bg-muted rounded w-32"})]})}):t?b&&N?r.jsxs("div",{className:"min-h-screen bg-gradient-subtle",children:[r.jsx("header",{className:"bg-background border-b border-border",children:r.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(h,{variant:"ghost",asChild:!0,children:r.jsxs(x,{to:"/dashboard",children:[r.jsx(Q,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-semibold text-foreground",children:b.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Analytics Dashboard"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(J,{}),r.jsx(Oe,{value:k,onChange:D}),r.jsx(h,{variant:"outline",asChild:!0,children:r.jsxs(x,{to:`/forms/${e}/responses`,children:[r.jsx(ee,{className:"h-4 w-4 mr-2"}),"Responses"]})})]})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsxs(a,{children:[r.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i,{className:"text-sm font-medium",children:"Total Views"}),r.jsx(te,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(o,{children:[r.jsx("div",{className:"text-2xl font-bold",children:N.totalViews.toLocaleString()}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Form page visits"})]})]}),r.jsxs(a,{children:[r.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i,{className:"text-sm font-medium",children:"Form Starts"}),r.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(o,{children:[r.jsx("div",{className:"text-2xl font-bold",children:N.totalStarts.toLocaleString()}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Users who started filling"})]})]}),r.jsxs(a,{children:[r.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i,{className:"text-sm font-medium",children:"Completions"}),r.jsx(re,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(o,{children:[r.jsx("div",{className:"text-2xl font-bold text-success",children:N.totalCompletions.toLocaleString()}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Successful submissions"})]})]}),r.jsxs(a,{children:[r.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i,{className:"text-sm font-medium",children:"Conversion Rate"}),r.jsx(ae,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(o,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[N.conversionRate.toFixed(1),"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Starts to completions"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs(a,{children:[r.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i,{className:"text-sm font-medium",children:"Avg. Completion Time"}),r.jsx(ne,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(o,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[N.avgCompletionTime.toFixed(1),"m"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Average time to complete"})]})]}),r.jsxs(a,{children:[r.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i,{className:"text-sm font-medium",children:"Drop-off Rate"}),r.jsx(re,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(o,{children:[r.jsxs("div",{className:"text-2xl font-bold text-warning",children:[N.dropOffRate.toFixed(1),"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Users who didn't complete"})]})]}),r.jsxs(a,{children:[r.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i,{className:"text-sm font-medium",children:"Form Score"}),r.jsx(y,{className:"h-4 w-4"})]}),r.jsxs(o,{children:[r.jsx("div",{className:"text-2xl font-bold text-primary",children:Math.max(0,Math.min(100,Math.round(2*N.conversionRate))).toFixed(0)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Performance score"})]})]})]}),r.jsxs(f,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(p,{className:"grid w-full grid-cols-4",children:[r.jsx(j,{value:"overview",children:"Overview"}),r.jsx(j,{value:"traffic",children:"Traffic"}),r.jsx(j,{value:"fields",children:"Field Analysis"}),r.jsx(j,{value:"devices",children:"Devices & Location"})]}),r.jsx(v,{value:"overview",children:r.jsx(Ae,{responsesByDate:N.responsesByDate,conversionRate:N.conversionRate,timeRange:k})}),r.jsx(v,{value:"traffic",children:r.jsxs(a,{children:[r.jsx(n,{children:r.jsx(i,{children:"Traffic Analysis"})}),r.jsx(o,{children:r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-4",children:"Views vs Responses"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Views"}),r.jsx("span",{className:"text-sm font-medium",children:N.totalViews})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Form Starts"}),r.jsx("span",{className:"text-sm font-medium",children:N.totalStarts})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Completions"}),r.jsx("span",{className:"text-sm font-medium",children:N.totalCompletions})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-4",children:"Conversion Funnel"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Views"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-32 h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:"w-full h-full bg-primary"})}),r.jsx("span",{className:"text-sm",children:"100%"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Starts"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-32 h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary",style:{width:(N.totalViews>0?N.totalStarts/N.totalViews*100:0)+"%"}})}),r.jsxs("span",{className:"text-sm",children:[N.totalViews>0?(N.totalStarts/N.totalViews*100).toFixed(1):0,"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Completions"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-32 h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-success",style:{width:`${N.conversionRate}%`}})}),r.jsxs("span",{className:"text-sm",children:[N.conversionRate.toFixed(1),"%"]})]})]})]})]})]})})})]})}),r.jsx(v,{value:"fields",children:r.jsx(Se,{formId:e})}),r.jsx(v,{value:"devices",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs(a,{children:[r.jsx(n,{children:r.jsx(i,{children:"Device Breakdown"})}),r.jsx(o,{children:r.jsx("div",{className:"space-y-4",children:N.deviceBreakdown.map(e=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:e.device}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-24 h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary",style:{width:(N.totalViews>0?e.count/N.totalViews*100:0)+"%"}})}),r.jsx("span",{className:"text-sm font-medium",children:e.count})]})]},e.device))})})]}),r.jsxs(a,{children:[r.jsx(n,{children:r.jsx(i,{children:"Top Locations"})}),r.jsx(o,{children:r.jsx("div",{className:"space-y-4",children:N.locationData.map(e=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:e.country}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-24 h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-accent",style:{width:(N.totalViews>0?e.count/N.totalViews*100:0)+"%"}})}),r.jsx("span",{className:"text-sm font-medium",children:e.count})]})]},e.country))})})]})]})})]})]})]}):r.jsx(u,{to:"/dashboard",replace:!0}):r.jsx(u,{to:"/auth",replace:!0})};export{ke as default};
