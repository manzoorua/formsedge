import{r}from"./main-BQOa5mM0.js";const e=/\{\{\s*(field|param|hidden|var)\s*:\s*([a-zA-Z0-9_]+)\s*\}\}/g,s=(s,a,n)=>{const t=r.useMemo(()=>{const r={};return s.forEach(e=>{if(!e.ref)return;const s=a[e.id];if(null==s||""===s)return;let n;n="string"==typeof s?s:Array.isArray(s)?s.join(", "):"number"==typeof s||"boolean"==typeof s?String(s):JSON.stringify(s),r[e.ref]=n}),r},[s,a]),o=r.useMemo(()=>{const r={};return s.forEach(e=>{if("calculated"!==e.type)return;if(!e.ref)return;const s=a[e.id];null!=s&&""!==s&&(r[e.ref]=s)}),r},[s,a]),u=r.useMemo(()=>({answersByRef:t,urlParams:n,variables:o}),[t,n,o]);return{resolveRecall:r.useMemo(()=>r=>r?r.replace(e,(r,e,s)=>{switch(e){case"field":return u.answersByRef[s]??"";case"param":case"hidden":return u.urlParams[s]??"";case"var":{const r=u.variables[s];return null==r?"":String(r)}default:return""}}):"",[u]),context:u}};export{s as u};
