import{a8 as e,k as s,r as a,R as t,j as i,C as d,f as l,b as n,d as r,e as c,B as o}from"./main-BQOa5mM0.js";import{I as h}from"./input-COMLYb-C.js";import{L as m}from"./label-B7su6Jaa.js";import{S as x}from"./switch-CocPZzzC.js";import{S as j,a as p,b,c as u,d as g}from"./select-DDetsmr9.js";import{M as f}from"./message-circle-DRCIKz-o.js";import{S as v}from"./settings-CSYLqhyU.js";import"./index-Cff7j1dh.js";import"./index-C38VFtOl.js";import"./index-CjuUx4b5.js";import"./chevron-down-BwC0H5jo.js";import"./check-WoqjMYuF.js";const w=()=>{const{config:w,loading:y,updateSettings:N}=e(),{toast:C}=s(),[S,I]=a.useState(!1),[F,E]=a.useState({enabled:w?.enabled||!1,widgetId:w?.widgetId||"widget_7243353be9689ba901ea6816",initialState:w?.initialState||"closed",mode:w?.mode||"app"});t.useEffect(()=>{w&&E({enabled:w.enabled,widgetId:w.widgetId,initialState:w.initialState,mode:w.mode||"app"})},[w]);return y?i.jsx(d,{children:i.jsx(l,{className:"p-6",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs(d,{children:[i.jsxs(n,{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(f,{className:"h-5 w-5 text-primary"}),i.jsx(r,{children:"Chatbot Settings"})]}),i.jsx(c,{children:"Configure the RagCanvas chatbot widget for your application"})]}),i.jsx(l,{className:"space-y-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(m,{className:"text-base",children:"Enable Chatbot"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Toggle the chatbot widget globally across the application"})]}),i.jsx(x,{checked:F.enabled,onCheckedChange:async e=>{const s={...F,enabled:e};E(s),I(!0);try{await N({enabled:e})&&C({title:e?"Chatbot Enabled":"Chatbot Disabled",description:`Chatbot has been ${e?"enabled":"disabled"} globally.`})}catch(a){C({title:"Error",description:"Failed to update chatbot status.",variant:"destructive"}),E({...F,enabled:!e})}finally{I(!1)}},disabled:S})]})})]}),F.enabled&&i.jsxs(i.Fragment,{children:[i.jsxs(d,{children:[i.jsxs(n,{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(v,{className:"h-5 w-5 text-primary"}),i.jsx(r,{children:"Widget Configuration"})]}),i.jsx(c,{children:"Configure your RAGcanvas widget ID"})]}),i.jsxs(l,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(m,{htmlFor:"widgetId",children:"Widget ID"}),i.jsx(h,{id:"widgetId",value:F.widgetId,onChange:e=>E({...F,widgetId:e.target.value}),placeholder:"widget_7243353be9689ba901ea6816"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Your RAGcanvas widget identifier from your dashboard"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(m,{htmlFor:"embedMode",children:"Embed Mode"}),i.jsxs(j,{value:F.mode,onValueChange:e=>E({...F,mode:e}),children:[i.jsx(p,{id:"embedMode",children:i.jsx(b,{})}),i.jsxs(u,{children:[i.jsx(g,{value:"app",children:"Full viewport overlay (recommended for floating bubble)"}),i.jsx(g,{value:"iframe",children:"Fixed-size window (shows as boxed chat widget)"})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"App mode: Floating bubble, page stays clickable. Iframe mode: Fixed 400x600px chat box."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(m,{htmlFor:"initialState",children:"Initial State"}),i.jsxs(j,{value:F.initialState,onValueChange:e=>E({...F,initialState:e}),children:[i.jsx(p,{id:"initialState",children:i.jsx(b,{})}),i.jsxs(u,{children:[i.jsx(g,{value:"closed",children:"Closed"}),i.jsx(g,{value:"minimized",children:"Minimized"}),i.jsx(g,{value:"open",children:"Open"})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"How the widget appears when the page loads (applies to full viewport mode)"})]})]})]}),i.jsx(d,{children:i.jsx(l,{className:"pt-6",children:i.jsx(o,{onClick:async()=>{I(!0);try{await N(F)&&C({title:"Settings Updated",description:"Chatbot settings have been updated successfully."})}catch(e){C({title:"Error",description:"Failed to update chatbot settings.",variant:"destructive"})}finally{I(!1)}},disabled:S,className:"w-full",children:S?"Saving...":"Save Configuration"})})})]})]})};function y(){return i.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Chatbot Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Configure RAGcanvas chatbot integration"})]}),i.jsx(w,{})]})}export{y as default};
