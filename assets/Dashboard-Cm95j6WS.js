import{c as e,r as s,k as a,j as r,B as t,s as i,a as n,u as l,l as o,m as c,n as d,o as m,p as x,A as u,T as h,q as p,g,C as j,b as f,d as v,e as b,f as N,X as y,h as w,N as _,L as C,S as k}from"./main-BQOa5mM0.js";import{B as S}from"./badge-6grXs2Vt.js";import{S as F}from"./separator-3yH5arB6.js";import{D as O,a as E,b as U,c as M,d as P}from"./dropdown-menu-DSV87Z6r.js";import{D as z,a as A,b as R,c as T,d as I,e as L}from"./dialog-Zbmvpzx0.js";import{A as $,a as D,b as q,c as B,d as V,e as Y,f as W,g as H}from"./alert-dialog-aBH68lDE.js";import{I as Z}from"./input-COMLYb-C.js";import{L as G}from"./label-B7su6Jaa.js";import{S as Q}from"./switch-CocPZzzC.js";import{T as K,a as X,b as J,c as ee}from"./tabs-BbGbqsLR.js";import{T as se}from"./textarea-Dbo2TYJP.js";import{S as ae,a as re,b as te,c as ie,d as ne}from"./select-DDetsmr9.js";import{v as le}from"./webhookValidation-DOL01rhp.js";import{L as oe}from"./link-EjgMawRu.js";import{E as ce}from"./external-link-IfMGOG27.js";import{C as de}from"./copy-BZksGIXa.js";import{S as me}from"./settings-CSYLqhyU.js";import{T as xe}from"./trash-2-B0C8EAKm.js";import{U as ue}from"./user-plus-GQG3TCfy.js";import{C as he}from"./crown-B_acK9Ws.js";import{M as pe}from"./mail-BKZIg2ud.js";import{A as ge}from"./arrow-left-BoD24ioV.js";import{B as je}from"./building-2-W5YSnn2W.js";import{L as fe}from"./lock-Ffn8JCOl.js";import{U as ve}from"./users-DfZDw2qr.js";import{C as be}from"./credit-card-vpcdCJf9.js";import{u as Ne}from"./usePricingData-teumppS2.js";import{C as ye}from"./check-WoqjMYuF.js";import{Z as we}from"./zap-Ewtv7hwb.js";import{R as _e,a as Ce}from"./RewardsPopup-VqGcFfEV.js";import{S as ke}from"./sparkles-CpkCaYAf.js";import{T as Se}from"./ThemeToggle-B4EQrceX.js";import{T as Fe}from"./TemplatePreview-0d7FIg2q.js";import{F as Oe}from"./file-text-WxvKYvjS.js";import{S as Ee}from"./search-BDbiXKhR.js";import{F as Ue}from"./filter-IbJucnsf.js";import{S as Me}from"./star-Dd_cckZo.js";import{E as Pe}from"./eye-Bq8mO4No.js";import{P as ze}from"./plus-Bqj9WNI1.js";import{B as Ae}from"./book-open-oIqIai_n.js";import{L as Re}from"./log-out-BdQigl_6.js";import{C as Te}from"./chart-column-DIuSFmYM.js";import"./index-C38VFtOl.js";import"./index-CjuUx4b5.js";import"./index-_nftuPOU.js";import"./circle-BfUTHkiN.js";import"./index-D4HqgO5_.js";import"./index-Cff7j1dh.js";import"./chevron-down-BwC0H5jo.js";import"./gift-mKnn5hCx.js";import"./share-2-CwU1PQxU.js";import"./dollar-sign-CFY7m5M8.js";import"./clock-BGkZXTj0.js";import"./calendar-BcqkHMaS.js";import"./format-CNqjFxb7.js";import"./en-US-DcoqlHup.js";import"./circle-check-big-BImW7D2D.js";import"./sun-oLtT9Ef9.js";import"./FieldRenderer-CugH2gNC.js";import"./checkbox-CljSm3_p.js";import"./radio-group-BjltNDB1.js";import"./index-CuckYF6g.js";import"./monitor-BXsJ4oWe.js";import"./smartphone-ewxUynRR.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Le=e("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),$e=e("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),De=e("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),qe=e("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),Be=({form:e,open:n,onOpenChange:l,onFormUpdate:o})=>{const[c,d]=s.useState(e),[m,x]=s.useState(!1),{toast:u}=a();return r.jsx(z,{open:n,onOpenChange:l,children:r.jsxs(A,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[r.jsx(R,{children:r.jsx(T,{children:"Form Settings"})}),r.jsxs(K,{defaultValue:"general",className:"w-full",children:[r.jsxs(X,{className:"grid w-full grid-cols-3",children:[r.jsx(J,{value:"general",children:"General"}),r.jsx(J,{value:"display",children:"Display"}),r.jsx(J,{value:"advanced",children:"Advanced"})]}),r.jsx(ee,{value:"general",className:"space-y-6 mt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"title",className:"text-base font-medium",children:"Form Title"}),r.jsx(Z,{id:"title",value:c.title,onChange:e=>d({...c,title:e.target.value}),placeholder:"Enter form title"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"description",className:"text-base font-medium",children:"Form Description"}),r.jsx(se,{id:"description",value:c.description||"",onChange:e=>d({...c,description:e.target.value}),placeholder:"Enter form description (optional)",rows:3})]}),r.jsx(F,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{className:"text-base font-medium",children:"Status"}),r.jsxs(ae,{value:c.status,onValueChange:e=>d({...c,status:e}),children:[r.jsx(re,{children:r.jsx(te,{placeholder:"Select status"})}),r.jsxs(ie,{children:[r.jsx(ne,{value:"draft",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(S,{variant:"secondary",children:"Draft"}),r.jsx("span",{children:"Not accepting responses"})]})}),r.jsx(ne,{value:"published",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(S,{variant:"default",children:"Published"}),r.jsx("span",{children:"Accepting responses"})]})}),r.jsx(ne,{value:"archived",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(S,{variant:"outline",children:"Archived"}),r.jsx("span",{children:"Read-only mode"})]})})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-base font-medium",children:"Public Access"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow anyone with the link to access this form"})]}),r.jsx(Q,{checked:c.is_public,onCheckedChange:e=>d({...c,is_public:e})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-base font-medium",children:"Accept Responses"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow new form submissions"})]}),r.jsx(Q,{checked:c.accept_responses,onCheckedChange:e=>d({...c,accept_responses:e})})]}),r.jsx(F,{})]})}),r.jsx(ee,{value:"display",className:"space-y-6 mt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(G,{className:"text-base font-medium",children:"Refill Link"}),r.jsx(S,{variant:"secondary",className:"text-xs",children:"PRO"})]}),r.jsx(Q,{checked:!1,onCheckedChange:()=>{},disabled:!0})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow users to return and edit their responses"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-base font-medium",children:"reCaptcha"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Protect against spam submissions"})]}),r.jsx(Q,{checked:!1,onCheckedChange:()=>{},disabled:!0})]})]})}),r.jsx(ee,{value:"advanced",className:"space-y-6 mt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"webhook-url",className:"text-base font-medium",children:"Webhook URL"}),r.jsx(Z,{id:"webhook-url",value:c.webhook_url||"",onChange:e=>d({...c,webhook_url:e.target.value}),placeholder:"https://example.com/webhook"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive form submissions via webhook"})]}),r.jsx(F,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-base font-medium",children:"Analytics"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Track form views and completions"})]}),r.jsx(Q,{checked:c.enable_analytics,onCheckedChange:e=>d({...c,enable_analytics:e})})]}),r.jsx(F,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-base font-medium",children:'Show "Powered by"'}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Display branding footer in forms"})]}),r.jsx(Q,{checked:c.branding_enabled,onCheckedChange:e=>d({...c,branding_enabled:e})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-base font-medium",children:"Collect Emails"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically collect user email addresses"})]}),r.jsx(Q,{checked:c.collect_emails,onCheckedChange:e=>d({...c,collect_emails:e})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-base font-medium",children:"Limit Responses"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Set a maximum number of responses"})]}),r.jsx(Q,{checked:c.limit_responses,onCheckedChange:e=>d({...c,limit_responses:e})})]}),c.limit_responses&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"max-responses",className:"text-base font-medium",children:"Maximum Responses"}),r.jsx(Z,{id:"max-responses",type:"number",value:c.max_responses||"",onChange:e=>d({...c,max_responses:parseInt(e.target.value)||null}),placeholder:"Enter maximum number of responses",min:1})]})]})})]}),r.jsxs(I,{children:[r.jsx(t,{variant:"outline",onClick:()=>l(!1),disabled:m,children:"Cancel"}),r.jsx(t,{onClick:async()=>{x(!0);try{if(c.webhook_url&&""!==c.webhook_url.trim()){const e=le(c.webhook_url);if(!e.isValid)return u({title:"Invalid Webhook URL",description:e.error,variant:"destructive"}),void x(!1)}const{data:s,error:a}=await i.from("forms").update({title:c.title,description:c.description,status:c.status,is_public:c.is_public,accept_responses:c.accept_responses,enable_analytics:c.enable_analytics,branding_enabled:c.branding_enabled,webhook_url:c.webhook_url,collect_emails:c.collect_emails,limit_responses:c.limit_responses,max_responses:c.max_responses}).eq("id",e.id).select().single();if(a)throw a;o({...s,url_params_config:s.url_params_config||void 0,layout:s.layout||{columns:1,grid_gap:"md",responsive:!0},background:s.background||void 0}),l(!1),u({title:"Success",description:"Form settings updated successfully"})}catch(s){u({title:"Error",description:s.message||"Failed to update form settings",variant:"destructive"})}finally{x(!1)}},disabled:m,children:m?"Saving...":"Save Settings"})]})]})})},Ve=({form:e,onFormUpdate:l,onFormDelete:o,onFormDuplicate:c})=>{const[d,m]=s.useState(!1),[x,u]=s.useState(!1),[h,p]=s.useState(!1),[g,j]=s.useState(e.title),[f,v]=s.useState(!1),{toast:b}=a(),N=n(),y=async()=>{if(g.trim()){v(!0);try{const{data:s,error:a}=await i.from("forms").update({title:g.trim()}).eq("id",e.id).select().single();if(a)throw a;l({...e,title:g.trim()}),m(!1),b({title:"Success",description:"Form renamed successfully"})}catch(s){b({title:"Error",description:s.message||"Failed to rename form",variant:"destructive"})}finally{v(!1)}}else b({title:"Error",description:"Form title cannot be empty",variant:"destructive"})};return r.jsxs(r.Fragment,{children:[r.jsxs(O,{children:[r.jsx(E,{asChild:!0,children:r.jsx(t,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-muted",onClick:e=>e.preventDefault(),children:r.jsx(Le,{className:"h-4 w-4"})})}),r.jsxs(U,{align:"end",className:"w-48 bg-background border border-border shadow-lg z-50",children:[r.jsxs(M,{onClick:async()=>{if("published"!==e.status)return void b({title:"Form not published",description:"Only published forms can be shared",variant:"destructive"});const s=`${window.location.origin}/f/${e.id}`;try{await navigator.clipboard.writeText(s),b({title:"Success",description:"Form link copied to clipboard"})}catch(a){b({title:"Error",description:"Failed to copy link",variant:"destructive"})}},className:"cursor-pointer",children:[r.jsx(oe,{className:"h-4 w-4 mr-2"}),"Copy link"]}),r.jsxs(M,{onClick:()=>{if("published"!==e.status)return void b({title:"Form not published",description:"Only published forms can be opened",variant:"destructive"});const s=`${window.location.origin}/f/${e.id}`;window.open(s,"_blank")},className:"cursor-pointer",disabled:"published"!==e.status,children:[r.jsx(ce,{className:"h-4 w-4 mr-2"}),"Link page"]}),r.jsxs(M,{onClick:async()=>{v(!0);try{const{data:s,error:a}=await i.from("forms").insert({title:`${e.title} (Copy)`,description:e.description,status:"draft",is_public:e.is_public,accept_responses:e.accept_responses,primary_color:e.primary_color,secondary_color:e.secondary_color,font_family:e.font_family,enable_analytics:e.enable_analytics,enable_partial_save:e.enable_partial_save,auto_save_interval:e.auto_save_interval,thank_you_message:e.thank_you_message,redirect_url:e.redirect_url,webhook_url:e.webhook_url,custom_css:e.custom_css,logo_url:e.logo_url,branding_enabled:e.branding_enabled,branding_color:e.branding_color,branding_logo_url:e.branding_logo_url,collect_emails:e.collect_emails,limit_responses:e.limit_responses,max_responses:e.max_responses,notification_email:e.notification_email,custom_url:e.custom_url,owner_id:e.owner_id}).select().single();if(a)throw a;const{data:r,error:t}=await i.from("form_fields").select("*").eq("form_id",e.id);if(t)throw t;if(r&&r.length>0){const e=r.map(e=>({form_id:s.id,type:e.type,label:e.label,description:e.description,placeholder:e.placeholder,required:e.required,options:e.options,validation_rules:e.validation_rules,conditional_logic:e.conditional_logic,calculations:e.calculations,styling:e.styling,logic_conditions:e.logic_conditions,order_index:e.order_index})),{error:a}=await i.from("form_fields").insert(e);if(a)throw a}const n={...s,url_params_config:s.url_params_config||void 0,layout:s.layout||{columns:1,grid_gap:"md",responsive:!0},background:s.background||void 0};c?.(n),b({title:"Success",description:`"${s.title}" created. Opening editor...`}),setTimeout(()=>{N(`/forms/${s.id}`)},500)}catch(s){b({title:"Error",description:s.message||"Failed to duplicate form",variant:"destructive"})}finally{v(!1)}},className:"cursor-pointer",disabled:f,children:[r.jsx(de,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),r.jsxs(M,{onClick:()=>p(!0),className:"cursor-pointer",children:[r.jsx(me,{className:"h-4 w-4 mr-2"}),"Settings"]}),r.jsx(P,{}),r.jsxs(M,{onClick:()=>{j(e.title),m(!0)},className:"cursor-pointer",children:[r.jsx($e,{className:"h-4 w-4 mr-2"}),"Rename"]}),r.jsxs(M,{onClick:()=>u(!0),className:"cursor-pointer text-destructive focus:text-destructive",children:[r.jsx(xe,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),r.jsx(z,{open:d,onOpenChange:m,children:r.jsxs(A,{children:[r.jsxs(R,{children:[r.jsx(T,{children:"Rename Form"}),r.jsx(L,{children:"Enter a new name for your form."})]}),r.jsx("div",{className:"grid gap-4 py-4",children:r.jsxs("div",{className:"grid gap-2",children:[r.jsx(G,{htmlFor:"title",children:"Form Title"}),r.jsx(Z,{id:"title",value:g,onChange:e=>j(e.target.value),placeholder:"Enter form title",onKeyDown:e=>{"Enter"===e.key&&y()}})]})}),r.jsxs(I,{children:[r.jsx(t,{variant:"outline",onClick:()=>m(!1),disabled:f,children:"Cancel"}),r.jsx(t,{onClick:y,disabled:f||!g.trim(),children:f?"Renaming...":"Rename"})]})]})}),r.jsx(Be,{form:e,open:h,onOpenChange:p,onFormUpdate:l}),r.jsx($,{open:x,onOpenChange:u,children:r.jsxs(D,{children:[r.jsxs(q,{children:[r.jsx(B,{children:"Are you absolutely sure?"}),r.jsxs(V,{children:["This action cannot be undone. This will permanently delete the form",r.jsxs("strong",{children:[' "',e.title,'"']})," and all of its responses."]})]}),r.jsxs(Y,{children:[r.jsx(W,{disabled:f,children:"Cancel"}),r.jsx(H,{onClick:async()=>{v(!0);try{const{error:s}=await i.from("forms").delete().eq("id",e.id);if(s)throw s;o(e.id),u(!1),b({title:"Success",description:"Form deleted successfully"})}catch(s){b({title:"Error",description:s.message||"Failed to delete form",variant:"destructive"})}finally{v(!1)}},disabled:f,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:f?"Deleting...":"Delete"})]})]})})]})};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Ye(e=!1){const{subscription:s}=l(),a=e?"admin":s?.subscription_tier||"free",r={maxForms:e?-1:"free"===a?3:"pro"===a?50:-1,maxResponsesPerForm:e?-1:"free"===a?100:"pro"===a?1e3:-1,maxOrgMembers:e?-1:"free"===a?0:"pro"===a?3:"enterprise"===a?10:0,canUseAdvancedFeatures:e||["pro","enterprise"].includes(a),canUseCustomBranding:e||["pro","enterprise"].includes(a),canUseFileUploads:e||["pro","enterprise"].includes(a),canUseIntegrations:e||["pro","enterprise"].includes(a),canUseTeamCollaboration:e||["pro","enterprise"].includes(a),canUseOrganizations:e||["pro","enterprise"].includes(a),canUseWhiteLabel:e||"enterprise"===a};return{subscription:s,currentTier:a,limits:r,hasFeature:e=>r[e],isWithinLimit:(e,s)=>{const a="forms"===s?r.maxForms:r.maxResponsesPerForm;return-1===a||e<a},canAddOrgMember:e=>!!r.canUseOrganizations&&(-1===r.maxOrgMembers||e<r.maxOrgMembers),getUpgradeMessage:e=>"free"===a?`Upgrade to Pro to unlock ${e}`:`Upgrade to Enterprise to unlock ${e}`,getOrgMemberLimitMessage:e=>r.canUseOrganizations?-1!==r.maxOrgMembers&&e>=r.maxOrgMembers?"pro"===a?"Pro plan limit reached (3 members). Upgrade to Enterprise for up to 10 members.":"Organization member limit reached.":"":"Upgrade to Pro to invite team members",isSubscribed:s?.subscribed||!1}}const We="formsedge_current_org";function He(...e){const a=e[0];if(1===e.length)return a;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const t=r.reduce((s,{useScope:a,scopeName:r})=>({...s,...a(e)[`__scope${r}`]}),{});return s.useMemo(()=>({[`__scope${a.scopeName}`]:t}),[t])}};return r.scopeName=a.scopeName,r}var Ze,Ge,Qe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{const t=o(`Primitive.${a}`),i=s.forwardRef((e,s)=>{const{asChild:i,...n}=e,l=i?t:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),r.jsx(l,{...n,ref:s})});return i.displayName=`Primitive.${a}`,{...e,[a]:i}},{}),Ke={exports:{}},Xe={};var Je=(Ge||(Ge=1,Ke.exports=function(){if(Ze)return Xe;Ze=1;var e=c(),s="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},a=e.useState,r=e.useEffect,t=e.useLayoutEffect,i=e.useDebugValue;function n(e){var a=e.getSnapshot;e=e.value;try{var r=a();return!s(e,r)}catch(t){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,s){return s()}:function(e,s){var l=s(),o=a({inst:{value:l,getSnapshot:s}}),c=o[0].inst,d=o[1];return t(function(){c.value=l,c.getSnapshot=s,n(c)&&d({inst:c})},[e,l,s]),r(function(){return n(c)&&d({inst:c}),e(function(){n(c)&&d({inst:c})})},[e]),i(l),l};return Xe.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:l,Xe}()),Ke.exports);function es(){return()=>{}}var ss="Avatar",[as]=function(e,a=[]){let t=[];const i=()=>{const a=t.map(e=>s.createContext(e));return function(r){const t=r?.[e]||a;return s.useMemo(()=>({[`__scope${e}`]:{...r,[e]:t}}),[r,t])}};return i.scopeName=e,[function(a,i){const n=s.createContext(i);n.displayName=a+"Context";const l=t.length;t=[...t,i];const o=a=>{const{scope:t,children:i,...o}=a,c=t?.[e]?.[l]||n,d=s.useMemo(()=>o,Object.values(o));return r.jsx(c.Provider,{value:d,children:i})};return o.displayName=a+"Provider",[o,function(r,t){const o=t?.[e]?.[l]||n,c=s.useContext(o);if(c)return c;if(void 0!==i)return i;throw new Error(`\`${r}\` must be used within \`${a}\``)}]},He(i,...a)]}(ss),[rs,ts]=as(ss),is=s.forwardRef((e,a)=>{const{__scopeAvatar:t,...i}=e,[n,l]=s.useState("idle");return r.jsx(rs,{scope:t,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:r.jsx(Qe.span,{...i,ref:a})})});is.displayName=ss;var ns="AvatarImage",ls=s.forwardRef((e,a)=>{const{__scopeAvatar:t,src:i,onLoadingStatusChange:n=()=>{},...l}=e,o=ts(ns,t),c=function(e,{referrerPolicy:a,crossOrigin:r}){const t=Je.useSyncExternalStore(es,()=>!0,()=>!1),i=s.useRef(null),n=t?(i.current||(i.current=new window.Image),i.current):null,[l,o]=s.useState(()=>ds(n,e));return m(()=>{o(ds(n,e))},[n,e]),m(()=>{const e=e=>()=>{o(e)};if(!n)return;const s=e("loaded"),t=e("error");return n.addEventListener("load",s),n.addEventListener("error",t),a&&(n.referrerPolicy=a),"string"==typeof r&&(n.crossOrigin=r),()=>{n.removeEventListener("load",s),n.removeEventListener("error",t)}},[n,r,a]),l}(i,l),x=d(e=>{n(e),o.onImageLoadingStatusChange(e)});return m(()=>{"idle"!==c&&x(c)},[c,x]),"loaded"===c?r.jsx(Qe.img,{...l,ref:a,src:i}):null});ls.displayName=ns;var os="AvatarFallback",cs=s.forwardRef((e,a)=>{const{__scopeAvatar:t,delayMs:i,...n}=e,l=ts(os,t),[o,c]=s.useState(void 0===i);return s.useEffect(()=>{if(void 0!==i){const e=window.setTimeout(()=>c(!0),i);return()=>window.clearTimeout(e)}},[i]),o&&"loaded"!==l.imageLoadingStatus?r.jsx(Qe.span,{...n,ref:a}):null});function ds(e,s){return e?s?(e.src!==s&&(e.src=s),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}cs.displayName=os;var ms=is,xs=ls,us=cs;const hs=s.forwardRef(({className:e,...s},a)=>r.jsx(ms,{ref:a,className:x("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));hs.displayName=ms.displayName;const ps=s.forwardRef(({className:e,...s},a)=>r.jsx(xs,{ref:a,className:x("aspect-square h-full w-full",e),...s}));ps.displayName=xs.displayName;const gs=s.forwardRef(({className:e,...s},a)=>r.jsx(us,{ref:a,className:x("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));gs.displayName=us.displayName;const js=({open:e,onOpenChange:o,formId:c,orgId:d,onInviteSent:m,memberCount:x=0,maxMembers:j=0})=>{const{user:f}=l(),{toast:v}=a(),b=n(),[N,y]=s.useState(""),[w,_]=s.useState("viewer"),[C,k]=s.useState(!1),[S,F]=s.useState(null),O=j>0&&x>=j;return r.jsx(z,{open:e,onOpenChange:o,children:r.jsxs(A,{className:"sm:max-w-md",children:[r.jsxs(R,{children:[r.jsxs(T,{className:"flex items-center gap-2",children:[r.jsx(ue,{className:"h-5 w-5"}),"Invite Team Member"]}),r.jsx(L,{children:c?"Invite someone to collaborate on this form.":"Invite someone to join your organization."})]}),j>0&&r.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground bg-muted/50 px-3 py-2 rounded-md",children:[r.jsx("span",{children:"Team members"}),r.jsxs("span",{className:O?"text-destructive font-medium":"",children:[x," / ",j]})]}),O&&r.jsxs(u,{variant:"destructive",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsxs(p,{className:"flex flex-col gap-2",children:[r.jsx("span",{children:"You've reached your plan's member limit."}),r.jsxs(t,{size:"sm",variant:"outline",onClick:()=>{o(!1),b("/billing")},className:"w-fit",children:[r.jsx(he,{className:"mr-2 h-4 w-4"}),"Upgrade Plan"]})]})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"email",children:"Email address"}),r.jsxs("div",{className:"relative",children:[r.jsx(pe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Z,{id:"email",type:"email",placeholder:"colleague@company.com",value:N,onChange:e=>y(e.target.value),className:"pl-10",disabled:O})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"role",children:"Role"}),r.jsxs(ae,{value:w,onValueChange:e=>_(e),disabled:O,children:[r.jsx(re,{id:"role",children:r.jsx(te,{placeholder:"Select a role"})}),r.jsxs(ie,{children:[r.jsx(ne,{value:"viewer",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:"Viewer"}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"Can view forms and responses"})]})}),r.jsx(ne,{value:"editor",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:"Editor"}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"Can edit forms and manage responses"})]})}),r.jsx(ne,{value:"admin",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:"Admin"}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"Full access including team management"})]})})]})]})]})]}),r.jsxs(I,{children:[r.jsx(t,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),r.jsx(t,{onClick:async()=>{if(!N||!f?.id)return;if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N)){k(!0),F(null);try{const{data:e,error:s}=await i.functions.invoke("invite-team-member",{body:{email:N,role:w,formId:c,orgId:d}});if(s)throw s;if(e?.error)throw F(e.code||null),new Error(e.error);v({title:"Invitation sent",description:`An invitation has been sent to ${N}.`}),y(""),_("viewer"),o(!1),m?.()}catch(e){e.message?.includes("SUBSCRIPTION_REQUIRED")||"SUBSCRIPTION_REQUIRED"===S?v({title:"Upgrade required",description:"Organization features require a Pro or Enterprise subscription.",variant:"destructive"}):e.message?.includes("MEMBER_LIMIT_REACHED")||"MEMBER_LIMIT_REACHED"===S?v({title:"Member limit reached",description:"Upgrade your plan to invite more team members.",variant:"destructive"}):v({title:"Failed to send invitation",description:e.message||"An error occurred while sending the invitation.",variant:"destructive"})}finally{k(!1)}}else v({title:"Invalid email",description:"Please enter a valid email address.",variant:"destructive"})},disabled:C||!N||O,children:C?r.jsxs(r.Fragment,{children:[r.jsx(g,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ue,{className:"mr-2 h-4 w-4"}),"Send Invitation"]})})]})]})})},fs=({open:e,onOpenChange:o,profile:c,onProfileUpdate:d})=>{const{user:m,signOut:x}=l(),{toast:g}=a(),y=n(),{limits:w}=Ye(),{currentOrg:_,memberCount:C,maxMembers:k,canInviteMore:O,refreshMemberCount:E}=function(){const{user:e}=l(),{limits:a,canAddOrgMember:r,getOrgMemberLimitMessage:t}=Ye(),[n,o]=s.useState([]),[c,d]=s.useState(null),[m,x]=s.useState(null),[u,h]=s.useState(0),[p,g]=s.useState(!0),[j,f]=s.useState(null),v=s.useCallback(async()=>{if(!e?.id)return o([]),d(null),void g(!1);try{g(!0);const{data:s,error:a}=await i.rpc("get_user_organizations",{_user_id:e.id});if(a)throw a;const r=(s||[]).map(e=>({org_id:e.org_id,org_name:e.org_name,org_slug:e.org_slug,role:e.role}));o(r);const t=localStorage.getItem(We),n=r.find(e=>e.org_id===t);n?d(n):r.length>0?(d(r[0]),localStorage.setItem(We,r[0].org_id)):(d(null),localStorage.removeItem(We))}catch(s){f(s.message)}finally{g(!1)}},[e?.id]),b=s.useCallback(async()=>{if(c?.org_id)try{const{data:e,error:s}=await i.from("organizations").select("*").eq("id",c.org_id).single();if(s)throw s;x(e)}catch(e){}else x(null)},[c?.org_id]),N=s.useCallback(async()=>{if(c?.org_id)try{const{count:e}=await i.from("organization_members").select("*",{count:"exact",head:!0}).eq("org_id",c.org_id),{count:s}=await i.from("team_invitations").select("*",{count:"exact",head:!0}).eq("org_id",c.org_id).is("accepted_at",null).gt("expires_at",(new Date).toISOString());h((e||0)+(s||0))}catch(e){}else h(0)},[c?.org_id]);s.useEffect(()=>{v()},[v]),s.useEffect(()=>{b(),N()},[b,N]);const y=s.useCallback(e=>{const s=n.find(s=>s.org_id===e);s&&(d(s),localStorage.setItem(We,e))},[n]),w=s.useCallback(async(s,r)=>{if(!e?.id)return null;if(!a.canUseOrganizations)throw new Error("Organization features require a Pro or Enterprise subscription");try{const a=r||s.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-"),{data:t,error:n}=await i.from("organizations").insert({name:s,slug:a}).select().single();if(n)throw n;const{error:l}=await i.from("organization_members").insert({org_id:t.id,user_id:e.id,role:"owner",accepted_at:(new Date).toISOString()});if(l)throw l;return await v(),t}catch(t){return f(t.message),null}},[e?.id,a.canUseOrganizations,v]),_=s.useCallback(e=>!!c&&(Array.isArray(e)?e:[e]).includes(c.role),[c]),C=s.useCallback(()=>r(u),[r,u]),k=s.useCallback(()=>t(u),[t,u]),S=s.useCallback(()=>_("owner"),[_]),F=s.useCallback(()=>_(["owner","admin"]),[_]),O=s.useCallback(()=>_(["owner","admin"]),[_]),E=s.useCallback(()=>_(["owner","billing_admin"]),[_]);return{organizations:n,currentOrg:c,currentOrgDetails:m,memberCount:u,maxMembers:a.maxOrgMembers,switchOrganization:y,createOrganization:w,hasOrgRole:_,canInviteMore:C,getMemberLimitMessage:k,isOrgOwner:S,isOrgAdmin:F,canManageMembers:O,canManageBilling:E,canUseOrganizations:a.canUseOrganizations,loading:p,error:j,refetch:v,refreshMemberCount:N}}(),[U,M]=s.useState("settings"),[P,I]=s.useState(!1),[L,$]=s.useState(!1),[D,q]=s.useState(!1),[B,V]=s.useState(!1),[Y,W]=s.useState([]),H=s.useRef(null),se=w.canUseOrganizations,[ae,re]=s.useState(c?.company_name||""),[te,ie]=s.useState(c?.first_name||""),[ne,le]=s.useState(c?.last_name||""),[oe,ce]=s.useState(c?.email||""),[de,me]=s.useState(c?.avatar_url||""),[Ne,ye]=s.useState(!1),[we,_e]=s.useState(""),[Ce,ke]=s.useState("587"),[Se,Fe]=s.useState(""),[Oe,Ee]=s.useState(""),Ue=(e,s)=>`${e?.charAt(0)||""}${s?.charAt(0)||""}`.toUpperCase();return r.jsxs(z,{open:e,onOpenChange:o,children:[r.jsxs(A,{className:"max-w-4xl max-h-[98vh] overflow-hidden p-0 flex flex-col",children:[r.jsx(R,{className:"p-6 pb-0 shrink-0",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(t,{variant:"ghost",size:"sm",onClick:()=>o(!1),className:"flex items-center gap-2",children:[r.jsx(ge,{className:"h-4 w-4"}),"Back to Dashboard"]}),r.jsx(T,{className:"text-2xl font-semibold",children:"Settings"})]})}),r.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:r.jsxs(K,{value:U,onValueChange:M,className:"h-full flex flex-col",children:[r.jsx("div",{className:"px-6 shrink-0",children:r.jsxs(X,{className:"grid w-full grid-cols-5",children:[r.jsx(J,{value:"settings",children:"Organization"}),r.jsx(J,{value:"members",children:"Members"}),r.jsx(J,{value:"smtp",children:"SMTP Settings"}),r.jsx(J,{value:"billing",children:"Billing"}),r.jsx(J,{value:"subscription",children:"Subscription"})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pt-4 pb-12",children:[r.jsx(ee,{value:"settings",className:"space-y-6 mt-0",children:r.jsxs(j,{children:[r.jsxs(f,{children:[r.jsxs(v,{className:"flex items-center gap-2",children:[r.jsx(je,{className:"h-5 w-5"}),"Organization Settings"]}),r.jsx(b,{children:"Manage your organization details and preferences."})]}),r.jsxs(N,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsxs(hs,{className:"h-16 w-16",children:[r.jsx(ps,{src:de}),r.jsx(gs,{className:"text-lg",children:Ue(te,ne)})]}),r.jsx(t,{variant:"outline",size:"sm",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0",onClick:()=>H.current?.click(),disabled:D,children:D?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary border-t-transparent"}):r.jsx(Ie,{className:"h-4 w-4"})}),r.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:e=>{const s=e.target.files?.[0];if(s){if(s.size>5242880)return void g({title:"File too large",description:"Please select an image smaller than 5MB",variant:"destructive"});(async e=>{try{if(q(!0),!m?.id)throw new Error("No user found");const s=e.name.split(".").pop(),a=`${m.id}/avatar.${s}`,{error:r}=await i.storage.from("avatars").upload(a,e,{upsert:!0});if(r)throw r;const{data:{publicUrl:t}}=i.storage.from("avatars").getPublicUrl(a);me(t),g({title:"Avatar uploaded",description:"Your profile picture has been updated."})}catch(s){g({title:"Error",description:"Failed to upload avatar",variant:"destructive"})}finally{q(!1)}})(s)}},className:"hidden"})]}),r.jsxs("div",{children:[r.jsx(G,{className:"text-sm font-medium",children:"Profile Picture"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Click the camera icon to upload a new profile picture"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"org-name",children:"Organization Name"}),r.jsx(Z,{id:"org-name",value:ae,onChange:e=>re(e.target.value),placeholder:"Enter organization name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"first-name",children:"First Name"}),r.jsx(Z,{id:"first-name",value:te,onChange:e=>ie(e.target.value),placeholder:"Enter first name"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"last-name",children:"Last Name"}),r.jsx(Z,{id:"last-name",value:ne,onChange:e=>le(e.target.value),placeholder:"Enter last name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"email",children:"Email Address"}),r.jsx(Z,{id:"email",type:"email",value:oe,onChange:e=>ce(e.target.value),placeholder:"Enter email address"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(t,{onClick:async()=>{I(!0);try{const{data:e,error:s}=await i.from("profiles").update({company_name:ae,first_name:te,last_name:ne,email:oe,avatar_url:de}).eq("id",m?.id).select().single();if(s)throw s;d(e),g({title:"Settings Updated",description:"Your profile settings have been saved successfully."})}catch(e){g({title:"Error",description:e.message||"Failed to update settings",variant:"destructive"})}finally{I(!1)}},disabled:P,children:P?"Updating...":"Update Settings"})})]})]})}),r.jsx(ee,{value:"members",className:"space-y-6 mt-0",children:se?r.jsxs(j,{children:[r.jsxs(f,{children:[r.jsxs(v,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ve,{className:"h-5 w-5"}),"Team Members",k>0&&r.jsxs(S,{variant:"outline",className:"ml-2",children:[C," / ",k]})]}),r.jsxs(t,{className:"flex items-center gap-2",onClick:()=>V(!0),disabled:!O(),children:[r.jsx(ue,{className:"h-4 w-4"}),"Invite Team"]})]}),r.jsx(b,{children:"Manage who has access to your workspace and forms."})]}),r.jsxs(N,{children:[!O()&&r.jsxs(u,{className:"mb-4",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsxs(p,{children:["You've reached your plan's member limit.",r.jsx(t,{variant:"link",className:"p-0 h-auto ml-1",onClick:()=>{o(!1),y("/billing")},children:"Upgrade your plan"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg bg-muted/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(hs,{className:"h-10 w-10",children:[r.jsx(ps,{src:c?.avatar_url}),r.jsx(gs,{className:"bg-gradient-primary text-white",children:Ue(c?.first_name||"",c?.last_name||"")})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:[c?.first_name," ",c?.last_name,r.jsx("span",{className:"text-muted-foreground text-sm ml-2",children:"(You)"})]}),r.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(pe,{className:"h-3 w-3"}),c?.email]})]})]}),r.jsxs(S,{variant:"secondary",className:"flex items-center gap-1",children:[r.jsx(he,{className:"h-3 w-3"}),"Owner"]})]}),0===Y.length&&r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(ve,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No team members yet"}),r.jsx("p",{className:"text-sm",children:"Invite colleagues to collaborate on your forms"})]})]})]})]}):r.jsx(j,{children:r.jsx(N,{className:"pt-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:r.jsx(fe,{className:"h-8 w-8 text-muted-foreground"})}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Team Collaboration"}),r.jsx("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:"Invite team members to collaborate on forms. Upgrade to Pro for up to 3 members, or Enterprise for up to 10."}),r.jsxs(t,{onClick:()=>{o(!1),y("/billing")},children:[r.jsx(he,{className:"mr-2 h-4 w-4"}),"Upgrade to Pro"]})]})})})}),r.jsx(ee,{value:"smtp",className:"space-y-6 mt-0",children:r.jsxs(j,{children:[r.jsxs(f,{children:[r.jsxs(v,{className:"flex items-center gap-2",children:[r.jsx(De,{className:"h-5 w-5"}),"SMTP Configuration"]}),r.jsx(b,{children:"Configure email delivery settings for your forms."})]}),r.jsxs(N,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-base font-medium",children:"Enable SMTP"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Use custom SMTP server for email delivery"})]}),r.jsx(Q,{checked:Ne,onCheckedChange:ye})]}),Ne&&r.jsxs(r.Fragment,{children:[r.jsx(F,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"smtp-host",children:"SMTP Host"}),r.jsx(Z,{id:"smtp-host",value:we,onChange:e=>_e(e.target.value),placeholder:"smtp.gmail.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"smtp-port",children:"Port"}),r.jsx(Z,{id:"smtp-port",value:Ce,onChange:e=>ke(e.target.value),placeholder:"587"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"smtp-username",children:"Username"}),r.jsx(Z,{id:"smtp-username",value:Se,onChange:e=>Fe(e.target.value),placeholder:"your-email@gmail.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"smtp-password",children:"Password"}),r.jsx(Z,{id:"smtp-password",type:"password",value:Oe,onChange:e=>Ee(e.target.value),placeholder:"••••••••"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(t,{children:"Save SMTP Settings"}),r.jsx(t,{variant:"outline",children:"Test Connection"})]})]})]})]})}),r.jsxs(ee,{value:"billing",className:"space-y-6 mt-0",children:[r.jsxs(j,{children:[r.jsxs(f,{children:[r.jsxs(v,{className:"flex items-center gap-2",children:[r.jsx(be,{className:"h-5 w-5"}),"Current Plan"]}),r.jsx(b,{children:"Manage your subscription and billing details."})]}),r.jsxs(N,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium capitalize",children:[c?.subscription_plan||"Free"," Plan"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"free"===c?.subscription_plan?"Limited features and forms":"Full access to all features"})]}),r.jsx(S,{variant:(e=>{switch(e){case"pro":return"default";case"enterprise":return"secondary";default:return"outline"}})(c?.subscription_plan||"free"),children:"free"===c?.subscription_plan?"Current":"Active"})]}),"free"===c?.subscription_plan&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Upgrade to PRO"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Unlock unlimited forms, advanced analytics, and premium features."}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(t,{children:"Buy PRO - $19/month"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Start your free trial today"})]})]})]}),"free"!==c?.subscription_plan&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Manage Subscription"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(t,{variant:"outline",children:"View Billing History"}),r.jsx(t,{variant:"outline",children:"Update Payment Method"})]})]})]})]})]}),r.jsxs(j,{className:"border-destructive/20",children:[r.jsxs(f,{children:[r.jsxs(v,{className:"flex items-center gap-2 text-destructive",children:[r.jsx(xe,{className:"h-5 w-5"}),"Danger Zone"]}),r.jsx(b,{children:"Permanently delete your account and all associated data."})]}),r.jsx(N,{children:L?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[r.jsx(h,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"This action cannot be undone. All your forms and data will be permanently deleted."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(t,{variant:"destructive",onClick:async()=>{g({title:"Account Deletion",description:"Account deletion functionality coming soon."}),$(!1)},children:"Yes, Delete Account"}),r.jsx(t,{variant:"outline",onClick:()=>$(!1),children:"Cancel"})]})]}):r.jsx(t,{variant:"destructive",onClick:()=>$(!0),children:"Delete Account"})})]})]})]})]})})]}),r.jsx(js,{open:B,onOpenChange:V,orgId:_?.org_id,memberCount:C,maxMembers:k,onInviteSent:()=>{E()}})]})},vs=[{name:"Remove FormsEdge branding",included:!0},{name:"Unlimited forms",included:!0},{name:"Unlimited responses per form",included:!0},{name:"File uploads & attachments",included:!0},{name:"Email notifications",included:!0},{name:"Custom domains",included:!0},{name:"Advanced analytics",included:!0},{name:"Team collaboration",included:!0},{name:"API access",included:!0},{name:"Priority support",included:!0}];function bs({open:e,onOpenChange:a}){const[i,l]=s.useState("yearly"),o=n(),{currentTier:c}=Ye(),{getProPricing:d}=Ne(),m=d(),x={monthly:{price:m.monthly,total:m.monthly},yearly:{price:m.yearly,total:m.yearlyTotal,savings:m.savingsAmount}};return"free"!==c?null:r.jsx(z,{open:e,onOpenChange:a,children:r.jsxs(A,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(R,{children:[r.jsx(T,{className:"text-2xl font-bold text-center mb-2",children:"Upgrade to PRO"}),r.jsx("p",{className:"text-muted-foreground text-center",children:"Unlock powerful features and remove limitations"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-center",children:r.jsxs("div",{className:"bg-muted rounded-lg p-1 flex",children:[r.jsx("button",{onClick:()=>l("monthly"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("monthly"===i?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:"Monthly"}),r.jsxs("button",{onClick:()=>l("yearly"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors relative "+("yearly"===i?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:["Yearly",m.savingsPercent>0&&r.jsxs(S,{className:"absolute -top-2 -right-2 bg-success text-white text-xs px-1",children:["Save ",m.savingsPercent,"%"]})]})]})}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsxs("span",{className:"text-4xl font-bold",children:["$",x[i].price]}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"per month"}),"yearly"===i&&r.jsx("div",{className:"text-xs text-success",children:"billed annually"})]})]}),"yearly"===i&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Save $",x.yearly.savings," per year"]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"font-semibold text-center mb-4",children:"Everything in PRO:"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:vs.map((e,s)=>r.jsxs("div",{className:"flex items-center space-x-3",children:[e.included?r.jsx(ye,{className:"h-5 w-5 text-success flex-shrink-0"}):r.jsx(y,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),r.jsx("span",{className:"text-sm "+(e.included?"text-foreground":"text-muted-foreground"),children:e.name})]},s))})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsx(we,{className:"h-4 w-4 text-warning"}),r.jsx("span",{className:"font-medium text-sm",children:"14-day free trial"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Cancel anytime during your trial period. No questions asked."})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(t,{variant:"outline",onClick:()=>a(!1),className:"flex-1",children:"Maybe Later"}),r.jsx(t,{onClick:()=>{a(!1),o("/billing")},className:"flex-1 bg-gradient-primary hover:opacity-90 text-white shadow-primary",children:"Start Free Trial"})]})]})]})})}function Ns(){const{user:e,loading:a}=l(),[r,t]=s.useState(null),[n,o]=s.useState(!0),[c,d]=s.useState(!1);return s.useEffect(()=>{let s=!1;return!a&&e?(async()=>{if(!e)return void(s||(t(!1),o(!1)));const a=`admin_status_${e.id}`,r=sessionStorage.getItem(a),n=sessionStorage.getItem(`${a}_time`);if(r&&n&&Date.now()-parseInt(n)<3e4)s||(t("true"===r),o(!1));else try{const{data:r,error:n}=await i.rpc("is_admin",{user_id:e.id});if(s)return;if(n){t(!1);const{count:e}=await i.from("admin_users").select("id",{count:"exact",head:!0});s||0!==(e||0)||d(!0)}else{const e=r||!1;if(t(e),sessionStorage.setItem(a,e.toString()),sessionStorage.setItem(`${a}_time`,Date.now().toString()),!e){const{count:e}=await i.from("admin_users").select("id",{count:"exact",head:!0});s||0!==(e||0)||d(!0)}}}catch(l){s||t(!1)}finally{s||o(!1)}})():a||e||(t(!1),o(!1)),()=>{s=!0}},[e?.id,a]),{isAdmin:r||!1,checkingAdmin:n,needsBootstrap:c}}function ys({firstName:e,avatarUrl:a}){const[i,n]=s.useState(!1),[l,o]=s.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-3",children:[a&&r.jsxs(hs,{className:"h-12 w-12 border-2 border-primary/20",children:[r.jsx(ps,{src:a,alt:e}),r.jsx(gs,{children:(c=e,c.split(" ").map(e=>e[0]).join("").toUpperCase())})]}),r.jsxs(t,{variant:"ghost",onClick:()=>n(!0),className:"group relative overflow-hidden bg-gradient-to-r from-primary/10 to-primary/5 hover:from-primary/20 hover:to-primary/10 border border-primary/20 hover:border-primary/30 transition-all duration-300 hover:scale-105 hover:shadow-lg",children:[r.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[r.jsx(ke,{className:"h-4 w-4 text-primary group-hover:animate-pulse"}),e]}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-700 bg-gradient-to-r from-transparent via-foreground/20 to-transparent"})]})]}),r.jsx(_e,{open:i,onOpenChange:n,onShowRewards:()=>{n(!1),o(!0)}}),r.jsx(Ce,{open:l,onOpenChange:o,onBack:()=>{o(!1),n(!0)}})]});var c}const ws=({open:e,onClose:a})=>{const o=n(),{user:c}=l(),[d,m]=s.useState([]),[x,u]=s.useState(!1),[h,p]=s.useState(""),[g,y]=s.useState("all"),[_,C]=s.useState(null),[k,F]=s.useState([]),[O,E]=s.useState([]);s.useEffect(()=>{e&&U()},[e]),s.useEffect(()=>{M()},[d,h,g]);const U=async()=>{u(!0);try{const{data:e,error:s}=await i.from("form_templates").select("*").order("is_featured",{ascending:!1}).order("created_at",{ascending:!1});if(s)throw s;m((e||[]).map(e=>({...e,template_data:e.template_data}))||[]);const a=[...new Set(e?.map(e=>e.category)||[])];E(a)}catch(e){w.error("Failed to load templates")}finally{u(!1)}},M=()=>{let e=d;h&&(e=e.filter(e=>e.title.toLowerCase().includes(h.toLowerCase())||e.description?.toLowerCase().includes(h.toLowerCase())||e.tags?.some(e=>e.toLowerCase().includes(h.toLowerCase())))),"all"!==g&&(e=e.filter(e=>e.category===g)),F(e)},P=async e=>{try{if(!c)return void o("/auth");a(),o(`/forms/new?template=${e.id}`)}catch(s){w.error("Failed to apply template. Please try again.")}},I=k.filter(e=>e.is_featured),L=k.filter(e=>!e.is_featured);return r.jsxs(r.Fragment,{children:[r.jsx(z,{open:e,onOpenChange:a,children:r.jsxs(A,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsx(R,{children:r.jsxs(T,{className:"flex items-center gap-2 text-2xl",children:[r.jsx(ke,{className:"h-6 w-6 text-primary"}),"Choose a Template"]})}),r.jsxs("div",{className:"flex flex-col gap-4 flex-1 overflow-hidden",children:[r.jsx("div",{className:"flex gap-3",children:r.jsxs(t,{onClick:()=>{a(),o("/forms/new")},variant:"outline",className:"flex-1 h-12 border-2 border-dashed border-primary/50 hover:border-primary hover:bg-primary/5",children:[r.jsx(Oe,{className:"h-5 w-5 mr-2"}),"Start from Scratch"]})}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ee,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Z,{placeholder:"Search templates...",value:h,onChange:e=>p(e.target.value),className:"pl-10"})]}),r.jsxs(ae,{value:g,onValueChange:y,children:[r.jsxs(re,{className:"w-[200px]",children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),r.jsx(te,{placeholder:"All categories"})]}),r.jsxs(ie,{children:[r.jsx(ne,{value:"all",children:"All Categories"}),O.map(e=>r.jsx(ne,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:x?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((e,s)=>r.jsxs(j,{className:"animate-pulse",children:[r.jsxs(f,{children:[r.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-muted rounded w-full"})]}),r.jsxs(N,{children:[r.jsx("div",{className:"h-16 bg-muted rounded mb-4"}),r.jsx("div",{className:"h-8 bg-muted rounded"})]})]},s))}):r.jsxs("div",{className:"space-y-6",children:[I.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Me,{className:"h-5 w-5 text-warning"}),r.jsx("h3",{className:"text-lg font-semibold",children:"Featured"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(e=>r.jsxs(j,{className:"hover:shadow-lg transition-all duration-300 hover:scale-105 border-2 hover:border-primary/30 bg-gradient-to-br from-primary/5 to-primary/10",children:[r.jsxs(f,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(S,{variant:"secondary",className:"capitalize bg-primary/20 text-primary",children:e.category}),r.jsx(Me,{className:"h-4 w-4 text-warning fill-current"})]}),r.jsx(v,{className:"text-lg leading-tight",children:e.title}),r.jsx(b,{className:"line-clamp-2 text-sm",children:e.description})]}),r.jsx(N,{className:"pt-0",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(t,{size:"sm",variant:"outline",onClick:()=>C(e),className:"flex-1",children:[r.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Preview"]}),r.jsxs(t,{size:"sm",onClick:()=>P(e),className:"flex-1 bg-gradient-primary text-white shadow-primary",children:[r.jsx(ze,{className:"h-4 w-4 mr-1"}),"Use"]})]})})]},e.id))})]}),L.length>0&&r.jsxs("div",{children:[I.length>0&&r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"More Templates"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.map(e=>r.jsxs(j,{className:"hover:shadow-lg transition-all duration-300 hover:scale-105 border hover:border-primary/30",children:[r.jsxs(f,{className:"pb-3",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx(S,{variant:"outline",className:"capitalize",children:e.category})}),r.jsx(v,{className:"text-lg leading-tight",children:e.title}),r.jsx(b,{className:"line-clamp-2 text-sm",children:e.description})]}),r.jsx(N,{className:"pt-0",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(t,{size:"sm",variant:"outline",onClick:()=>C(e),className:"flex-1",children:[r.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Preview"]}),r.jsxs(t,{size:"sm",onClick:()=>P(e),className:"flex-1",children:[r.jsx(ze,{className:"h-4 w-4 mr-1"}),"Use"]})]})})]},e.id))})]}),0===k.length&&!x&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:"📋"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No templates found"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search criteria or start from scratch."}),r.jsx(t,{variant:"outline",onClick:()=>{p(""),y("all")},children:"Clear Filters"})]})]})})]})]})}),r.jsx(Fe,{template:_,isOpen:!!_,onClose:()=>C(null),onUseTemplate:P})]})},_s=()=>{const{user:e,signOut:n,loading:o}=l(),[c,d]=s.useState([]),[m,x]=s.useState(null),[u,h]=s.useState(!0),[p,g]=s.useState(!1),[y,w]=s.useState(!1),[O,E]=s.useState(!1),{toast:U}=a(),{isAdmin:M}=Ns(),{currentTier:P,limits:z,isWithinLimit:A}=Ye(M);s.useEffect(()=>{e&&R()},[e]);const R=async()=>{try{const{data:s}=await i.from("profiles").select("*").eq("id",e?.id).single();s&&x(s);const{data:a,error:r}=await i.from("forms").select("*").eq("owner_id",e?.id).order("updated_at",{ascending:!1});if(r)throw r;const{data:t}=await i.from("team_members").select("\n          role,\n          forms!inner(*)\n        ").eq("user_id",e?.id).not("accepted_at","is",null),n=(t||[]).map(e=>({...e.forms,_shared:!0,_sharedRole:e.role})).filter(s=>s.owner_id!==e?.id),l=[...a||[],...n].map(e=>({...e,url_params_config:e.url_params_config||void 0,layout:e.layout||{columns:1,grid_gap:"md",responsive:!0}}));d(l)}catch(s){U({title:"Error loading dashboard",description:s.message,variant:"destructive"})}finally{h(!1)}};if(o||u)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-muted rounded w-48"}),r.jsx("div",{className:"h-4 bg-muted rounded w-32"})]})});if(!e)return r.jsx(_,{to:"/auth",replace:!0});const T=e=>{d(s=>s.map(s=>s.id===e.id?e:s))},I=e=>{d(s=>s.filter(s=>s.id!==e))},L=e=>{d(s=>[e,...s])},$=e=>{switch(e){case"published":return"bg-success";case"draft":return"bg-warning";default:return"bg-muted"}};return r.jsxs("div",{className:"min-h-screen bg-gradient-subtle",children:[r.jsx("header",{className:"bg-background border-b border-border",children:r.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[r.jsxs(C,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-lg",children:"F"})}),r.jsx("span",{className:"font-bold text-xl text-foreground",children:"FormsEdge"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(S,{variant:M?"default":"secondary",className:"capitalize font-medium",children:M?"Admin":`${P} plan`}),r.jsx(t,{variant:"ghost",size:"sm",asChild:!0,className:"bg-gradient-to-r from-primary/10 to-primary/5 hover:from-primary/20 hover:to-primary/10 border border-primary/20 hover:border-primary/30 transition-all duration-300 hover:scale-105 hover:shadow-lg",children:r.jsxs(C,{to:"/docs",children:[r.jsx(Ae,{className:"h-4 w-4 mr-2 text-primary"}),"Tutorial"]})}),r.jsx(t,{asChild:!0,className:"bg-gradient-primary hover:opacity-90 text-white shadow-primary",size:"sm",children:r.jsxs(C,{to:"/dashboard/integrations",children:[r.jsx(we,{className:"h-4 w-4 mr-2"}),"Integrations"]})}),M?r.jsx(t,{asChild:!0,className:"bg-gradient-primary hover:opacity-90 text-white shadow-primary",size:"sm",children:r.jsxs(C,{to:"/admin",children:[r.jsx(k,{className:"h-4 w-4 mr-2"}),"Admin Panel"]})}):"free"===P&&r.jsxs(t,{onClick:()=>w(!0),className:"bg-gradient-primary hover:opacity-90 text-white shadow-primary",size:"sm",children:[r.jsx(ze,{className:"h-4 w-4 mr-2"}),"Go PRO"]}),r.jsx(Se,{}),r.jsxs(t,{variant:"ghost",size:"sm",onClick:()=>g(!0),children:[r.jsx(me,{className:"h-4 w-4 mr-2"}),"Settings"]}),r.jsxs(t,{variant:"ghost",size:"sm",onClick:n,children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Hi"}),r.jsx(ys,{firstName:m?.first_name||"User",avatarUrl:m?.avatar_url})]}),r.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:["Create and manage your forms here. ",r.jsx("span",{className:"font-medium text-primary",children:"Click on your name to Refer & Earn!"})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Your Forms"}),!M&&"free"===P&&r.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[c.length,"/",z.maxForms," forms used"]})]}),A(c.length,"forms")?r.jsxs(t,{className:"shadow-primary bg-gradient-primary text-white",onClick:()=>E(!0),children:[r.jsx(ze,{className:"h-4 w-4 mr-2"}),"Create New Form"]}):r.jsxs(t,{onClick:()=>w(!0),className:"bg-gradient-primary hover:opacity-90 text-white shadow-primary",children:[r.jsx(ze,{className:"h-4 w-4 mr-2"}),"Upgrade to Create More"]})]}),0===c.length?r.jsx(j,{className:"text-center py-12",children:r.jsxs(N,{children:[r.jsx(Oe,{className:"h-12 w-12 text-foreground mx-auto mb-4"}),r.jsx(v,{className:"mb-2 font-bold",children:"No forms yet"}),r.jsx(b,{className:"mb-4 text-slate-600 dark:text-slate-300",children:"Create your first form to get started with collecting responses"}),r.jsxs(t,{className:"shadow-primary bg-gradient-primary text-white",onClick:()=>E(!0),children:[r.jsx(ze,{className:"h-4 w-4 mr-2"}),"Create Your First Form"]})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((e,s)=>{const a=["bg-gradient-to-br from-purple-50 to-violet-100 dark:from-purple-900/50 dark:to-violet-800/50 border-purple-200 dark:border-purple-700","bg-gradient-to-br from-teal-50 to-cyan-100 dark:from-teal-900/50 dark:to-cyan-800/50 border-teal-200 dark:border-teal-700","bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/50 dark:to-indigo-800/50 border-blue-200 dark:border-blue-700","bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/50 dark:to-emerald-800/50 border-green-200 dark:border-green-700","bg-gradient-to-br from-orange-50 to-amber-100 dark:from-orange-900/50 dark:to-amber-800/50 border-orange-200 dark:border-orange-700"],i=a[s%a.length];return r.jsxs(j,{className:`${i} hover:shadow-hover transition-all duration-300 hover:scale-[1.02] hover:-translate-y-1 border-2`,children:[r.jsxs(f,{className:"relative",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(S,{className:`${$(e.status)} text-white capitalize shadow-sm font-bold`,children:e.status}),e._shared&&r.jsx(S,{variant:"outline",className:"text-xs font-medium capitalize",children:e._sharedRole||"Shared"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300 font-medium",children:new Date(e.created_at).toLocaleDateString()}),!e._shared&&r.jsx(Ve,{form:e,onFormUpdate:T,onFormDelete:I,onFormDuplicate:L})]})]}),r.jsx(v,{className:"line-clamp-1 text-foreground font-bold",children:e.title}),r.jsx(b,{className:"line-clamp-2 text-slate-600 dark:text-slate-300",children:e.description||"No description"})]}),r.jsxs(N,{className:"bg-background/60 dark:bg-background/80 backdrop-blur-sm rounded-lg m-3 mt-0",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm text-foreground mb-4 font-medium",children:[r.jsx("span",{children:"0 responses"}),r.jsx("span",{children:"0 views"})]}),r.jsx(F,{className:"mb-4"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(t,{variant:"secondary",size:"sm",className:"flex-1 font-medium",asChild:!0,children:r.jsx(C,{to:`/forms/${e.id}`,children:"Edit"})}),r.jsx(t,{variant:"secondary",size:"sm",className:"flex-1 font-medium",disabled:"published"!==e.status,asChild:"published"===e.status,children:"published"===e.status?r.jsxs(C,{to:`/forms/${e.id}/embed`,children:[r.jsx(qe,{className:"h-4 w-4 mr-1"}),"Test"]}):r.jsxs("span",{className:"opacity-50",children:[r.jsx(qe,{className:"h-4 w-4 mr-1"}),"Test"]})}),r.jsx(t,{variant:"secondary",size:"sm",className:"flex-1 font-medium",asChild:!0,children:r.jsx(C,{to:`/forms/${e.id}/responses`,children:"Responses"})}),r.jsx(t,{variant:"secondary",size:"sm",className:"font-medium",asChild:!0,children:r.jsx(C,{to:`/forms/${e.id}/analytics`,children:r.jsx(Te,{className:"h-4 w-4"})})})]})]})]},e.id)})})]})]}),r.jsx(fs,{open:p,onOpenChange:g,profile:m,onProfileUpdate:x}),r.jsx(bs,{open:y,onOpenChange:w}),r.jsx(ws,{open:O,onClose:()=>E(!1)})]})};export{_s as default};
