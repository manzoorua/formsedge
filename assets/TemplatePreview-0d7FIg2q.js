import{r as e,j as s,B as a}from"./main-BQOa5mM0.js";import{D as r,a as l,b as i,c as t}from"./dialog-Zbmvpzx0.js";import{B as n}from"./badge-6grXs2Vt.js";import{F as d}from"./FieldRenderer-CugH2gNC.js";import{M as m}from"./monitor-BXsJ4oWe.js";import{S as c}from"./smartphone-ewxUynRR.js";import{S as o}from"./sparkles-CpkCaYAf.js";import{E as x}from"./eye-Bq8mO4No.js";const h=({template:h,isOpen:p,onClose:f,onUseTemplate:j})=>{const[u,v]=e.useState("desktop");if(!h)return null;const g=h.template_data,N=g.form||{},b=g.fields||[],w=h.tags?.includes("recall"),y=/\{\{(field|param|var|hidden):([^}]+)\}\}/g,k=b.filter(e=>e.ref).map(e=>e.ref),C=g.url_params_config||[],_=new Set,R=e=>{if(!e)return;const s=e.matchAll(y);for(const a of s)_.add(`{{${a[1]}:${a[2]}}}`)};return R(N.title),R(N.description),R(N.thank_you_message),R(N.redirect_url),b.forEach(e=>{R(e.label),R(e.description),R(e.placeholder)}),s.jsx(r,{open:p,onOpenChange:f,children:s.jsxs(l,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[s.jsxs(i,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(t,{children:h.title}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:h.description})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(a,{variant:"desktop"===u?"default":"outline",size:"sm",onClick:()=>v("desktop"),children:s.jsx(m,{className:"h-4 w-4"})}),s.jsx(a,{variant:"mobile"===u?"default":"outline",size:"sm",onClick:()=>v("mobile"),children:s.jsx(c,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(n,{variant:"secondary",children:h.category}),h.tags?.includes("recall")&&s.jsxs(n,{variant:"secondary",className:"bg-gradient-primary text-white",children:[s.jsx(o,{className:"h-3 w-3 mr-1"}),"Recall Enabled"]}),h.tags?.filter(e=>"recall"!==e).map(e=>s.jsx(n,{variant:"outline",className:"text-xs",children:e},e))]}),w&&_.size>0&&s.jsxs("div",{className:"mt-4 p-4 bg-primary/5 border border-primary/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(o,{className:"h-4 w-4 text-primary"}),s.jsx("h3",{className:"font-semibold text-sm text-primary",children:"Recall Features Used"})]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[k.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-muted-foreground mb-1",children:"Field References:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:k.map(e=>s.jsx(n,{variant:"outline",className:"text-xs font-mono bg-background",children:`{{field:${e}}}`},e))})]}),C.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-muted-foreground mb-1",children:"URL Parameters:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:C.map(e=>s.jsx(n,{variant:"outline",className:"text-xs font-mono bg-background",children:`{{param:${e.name}}}`},e.name))})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-muted-foreground mb-1",children:["Total Recall tokens: ",_.size]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This template uses dynamic personalization to create a tailored experience"})]})]})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("div",{className:`\n              mx-auto border rounded-lg bg-background overflow-auto h-[60vh]\n              ${"mobile"===u?"max-w-sm":"max-w-2xl"}\n            `,children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:N.title}),N.description&&s.jsx("p",{className:"text-muted-foreground",children:N.description})]}),s.jsx("div",{className:"space-y-4",children:b.map((e,a)=>s.jsx("div",{className:"space-y-2",children:s.jsx(d,{field:{...e,id:`field-${a}`,form_id:"preview"},isPreview:!0})},a))}),s.jsx("div",{className:"mt-6",children:s.jsx(a,{className:"w-full",style:{backgroundColor:N.primary_color||"#3b82f6",borderColor:N.primary_color||"#3b82f6"},children:"Submit Form"})})]})})}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsxs(a,{variant:"outline",onClick:f,children:[s.jsx(x,{className:"h-4 w-4 mr-2"}),"Close Preview"]}),s.jsx(a,{onClick:()=>j(h),children:"Use This Template"})]})]})})};export{h as T};
